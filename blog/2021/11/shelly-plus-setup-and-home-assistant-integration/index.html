<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-us lang=en-us><head><title itemprop=name>Shelly Plus setup and Home Assistant integration :: Sequr</title>
<meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=robots content="noodp, noydir"><meta name=googlebot content="noodp, noydir"><meta name=url content="https://sequr.be/blog/2021/11/shelly-plus-setup-and-home-assistant-integration/" itemprop=url><link rel=icon href=/favicon.ico><meta itemprop=name content="Shelly Plus setup and Home Assistant integration"><meta itemprop=description content="How to setup and integrate Shelly 2nd Generation (Plus and Pro) devices into Home Assistant using the built-in integration."><meta itemprop=datePublished content="2021-11-05T00:00:00+01:00"><meta itemprop=dateModified content="2021-11-05T00:00:00+01:00"><meta itemprop=wordCount content="1238"><meta itemprop=image content="https://sequr.be/blog/2021/11/shelly-plus-setup-and-home-assistant-integration/cover.png"><meta itemprop=keywords content="Home,Automation,Shelly,Plus,Pro,2nd Gen"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://sequr.be/blog/2021/11/shelly-plus-setup-and-home-assistant-integration/cover.png"><meta name=twitter:title content="Shelly Plus setup and Home Assistant integration"><meta name=twitter:description content="How to setup and integrate Shelly 2nd Generation (Plus and Pro) devices into Home Assistant using the built-in integration."><meta property="og:url" content="https://sequr.be/blog/2021/11/shelly-plus-setup-and-home-assistant-integration/"><meta property="og:site_name" content="Sequr"><meta property="og:title" content="Shelly Plus setup and Home Assistant integration"><meta property="og:description" content="How to setup and integrate Shelly 2nd Generation (Plus and Pro) devices into Home Assistant using the built-in integration."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2021-11-05T00:00:00+01:00"><meta property="article:modified_time" content="2021-11-05T00:00:00+01:00"><meta property="article:tag" content="Home"><meta property="article:tag" content="Automation"><meta property="article:tag" content="Shelly"><meta property="article:tag" content="Plus"><meta property="article:tag" content="Pro"><meta property="article:tag" content="2nd Gen"><meta property="og:image" content="https://sequr.be/blog/2021/11/shelly-plus-setup-and-home-assistant-integration/cover.png"><meta name=description content="How to setup and integrate Shelly 2nd Generation (Plus and Pro) devices into Home Assistant using the built-in integration."><meta property="og:updated_time" content="2021-11-05T00:00:00+01:00"><link rel=sitemap type=application/xml title=Sitemap href=https://sequr.be/sitemap.xml><meta name=apple-mobile-web-app-title content="Shelly Plus setup and Home Assistant integration"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><link rel=webmention href=https://webmention.io/sequr.be/webmention><link rel=stylesheet href=/css/bundle.min.c6efcdc4ab1a8334912503187566da2b11f3a8fd243697a0f4d1bc4452469cdd.css integrity="sha256-xu/NxKsagzSRJQMYdWbaKxHzqP0kNpeg9NG8RFJGnN0=" crossorigin=anonymous><script defer type=text/javascript src=/js/bundle.min.145453261a7755f5042a854c4213501d215a8fbe34c08d181c40f803f1315e74.js integrity="sha256-FFRTJhp3VfUEKoVMQhNQHSFaj740wI0YHED4A/ExXnQ=" crossorigin=anonymous></script></head><body class=dark-theme><div class=wrapper><aside class="sidebar h-card background-image"><div class="container sidebar-sticky"><div class=light-dark align=right><button class=btn-light-dark title="Toggle light/dark mode"><svg class="moon" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentcolor" d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278z"/></svg><svg class="sun" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentcolor" d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></svg></button></div><div class="sidebar-about hcard"><h1 class=brand><a href=https://sequr.be/><img src=/logo.png class="u-logo u-photo" alt="Sequr brand image">
</a><a href=https://sequr.be/ class="u-url p-org"><h1>Sequr</h1></a></h1><p class="lead p-note">Writeups and random stuff about infosec and life</p></div><nav><ul class=sidebar-nav><li class=heading><a href=/about/ title=About>About</a></li><li class=heading><a href=/blog/ title=Blog>Blog</a></li><li class=heading><a href=/shoppinglist/ title=Shopping>Shopping</a></li><li class=heading><a href=/privacy/ title=Privacy>Privacy</a></li></ul></nav><a target=_blank class=social title="RSS Feed" href=/blog/index.xml><svg width="1em" height="1.2em" viewBox="0 0 1280 1280"><g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)" fill="currentcolor"><path d="M2295 11929c-284-12-642-45-707-65-17-5-18-63-18-1039 0-569 4-1036 8-1039 5-3 74 6 153 19 510 86 1168 95 1789 25 1348-153 2602-677 3670-1531 385-308 820-744 1126-1129 842-1060 1362-2313 1514-3650 70-621 61-1279-25-1789-13-79-22-148-19-153 3-4 471-8 1039-8h1035l5 23c51 225 85 942 67 1419-23 605-77 1044-198 1617-294 14e2-927 2734-1823 3846-1043 1295-2364 2259-3909 2854-1158 447-2451 656-3707 6e2z"/><path d="M2255 7845c-269-25-620-81-667-106-17-9-18-55-18-899 0-706 3-890 13-890 6 0 66 18 132 41 130 44 288 79 467 105 154 21 577 30 749 15 1207-107 2267-823 2814-1902 166-327 268-637 330-1001 38-227 48-384 42-662-8-348-44-590-126-831-23-66-41-126-41-132 0-10 184-13 890-13 844 0 890 1 899 18 27 50 88 452 110 725 14 162 14 624 1 782-59 703-233 1323-545 1945-481 956-1313 1788-2270 2268-620 310-1239 483-1940 542-165 14-669 10-840-5z"/><path d="M2519 3815c-391-66-725-336-868-703-79-201-96-462-45-677 83-344 338-641 666-774 116-47 205-69 330-80 412-39 811 153 1040 5e2 193 292 240 648 128 981-135 403-492 699-914 757-1e2 14-241 12-337-4z"/></g></svg>
</a><a href=https://bsky.app/profile/sequr.be target=_blank class="u-url social" rel="external noopener me" title=Bluesky><svg width="1.2em" height="1.2em" viewBox="0 0 568 501"><path fill="currentcolor" d="M123.121 33.6637C188.241 82.5526 258.281 181.681 284 234.873c25.719-53.192 95.759-152.3204 160.879-201.2093C491.866-1.61183 568-28.9064 568 57.9464 568 75.2916 558.055 203.659 552.222 224.501c-20.275 72.453-94.155 90.933-159.875 79.748C507.222 323.8 536.444 388.56 473.333 453.32c-119.86 122.992-172.272-30.859-185.702-70.281C285.169 375.812 284.017 372.431 284 375.306 283.983 372.431 282.831 375.812 280.369 383.039c-13.43 39.422-65.842 193.273-185.7023 70.281C31.5556 388.56 60.7778 323.8 175.653 304.249 109.933 315.434 36.0535 296.954 15.7778 224.501 9.94525 203.659.0 75.2916.0 57.9464.0-28.9064 76.1345-1.61183 123.121 33.6637z"/></svg></a><a href=https://mastodon-belgium.be/@TerraGloba target=_blank class="u-url social" rel="external noopener me" title=Mastodon><svg width="1.2em" height="1.2em" viewBox="0 0 24 24"><path fill="currentcolor" d="M20.94 14c-.28 1.41-2.44 2.96-4.97 3.26-1.31.15-2.6.3-3.97.24-2.25-.11-4-.54-4-.54v.62c.32 2.22 2.22 2.35 4.03 2.42 1.82.05 3.44-.46 3.44-.46l.08 1.65s-1.28.68-3.55.81c-1.25.07-2.81-.03-4.62-.5-3.92-1.05-4.6-5.24-4.7-9.5l-.01-3.43c0-4.34 2.83-5.61 2.83-5.61C6.95 2.3 9.41 2 11.97 2h.06c2.56.0 5.02.3 6.47.96.0.0 2.83 1.27 2.83 5.61.0.0.04 3.21-.39 5.43M18 8.91c0-1.08-.3-1.91-.85-2.56-.56-.63-1.3-.96-2.23-.96-1.06.0-1.87.41-2.42 1.23l-.5.88-.5-.88c-.56-.82-1.36-1.23-2.43-1.23-.92.0-1.66.33-2.23.96C6.29 7 6 7.83 6 8.91v5.26h2.1V9.06c0-1.06.45-1.62 1.36-1.62 1 0 1.5.65 1.5 1.93v2.79h2.07V9.37c0-1.28.5-1.93 1.51-1.93.9.0 1.35.56 1.35 1.62v5.11H18V8.91z"/></svg></a><a href=https://github.com/TheGroundZero target=_blank class="u-url social" rel="external noopener me" title=Github><svg width="1.2em" height="1.2em" viewBox="-2 -2 24 24"><path fill="currentcolor" d="M18.88 1.099C18.147.366 17.265.0 16.233.0H3.746C2.714.0 1.832.366 1.099 1.099.366 1.832.0 2.714.0 3.746v12.487c0 1.032.366 1.914 1.099 2.647.733.733 1.615 1.099 2.647 1.099H6.66c.19.0.333-.007.429-.02a.504.504.0 00.286-.169c.095-.1.143-.245.143-.435l-.007-.885c-.004-.564-.006-1.01-.006-1.34l-.3.052c-.19.035-.43.05-.721.046a5.555 5.555.0 01-.904-.091 2.026 2.026.0 01-.872-.39 1.651 1.651.0 01-.572-.8l-.13-.3a3.25 3.25.0 00-.41-.663c-.186-.243-.375-.407-.566-.494l-.09-.065a.956.956.0 01-.17-.156.723.723.0 01-.117-.182c-.026-.061-.004-.111.065-.15.07-.04.195-.059.378-.059l.26.04c.173.034.388.138.643.311a2.1 2.1.0 01.631.677c.2.355.44.626.722.813.282.186.566.28.852.28.286.0.533-.022.742-.065a2.59 2.59.0 00.585-.196c.078-.58.29-1.028.637-1.34a8.907 8.907.0 01-1.333-.234 5.314 5.314.0 01-1.223-.507 3.5 3.5.0 01-1.047-.872c-.277-.347-.505-.802-.683-1.365-.177-.564-.266-1.215-.266-1.952.0-1.049.342-1.942 1.027-2.68-.32-.788-.29-1.673.091-2.652.252-.079.625-.02 1.119.175.494.195.856.362 1.086.5.23.14.414.257.553.352a9.233 9.233.0 012.497-.338c.859.0 1.691.113 2.498.338l.494-.312a6.997 6.997.0 011.197-.572c.46-.174.81-.221 1.054-.143.39.98.424 1.864.103 2.653.685.737 1.028 1.63 1.028 2.68.0.737-.089 1.39-.267 1.957-.177.568-.407 1.023-.689 1.366a3.65 3.65.0 01-1.053.865c-.42.234-.828.403-1.223.507a8.9 8.9.0 01-1.333.235c.45.39.676 1.005.676 1.846v3.11c0 .147.021.266.065.357a.36.36.0 00.208.189c.096.034.18.056.254.064.074.01.18.013.318.013h2.914c1.032.0 1.914-.366 2.647-1.099.732-.732 1.099-1.615 1.099-2.647V3.746c0-1.032-.367-1.914-1.1-2.647z"/></svg></a><a href=https://twitter.com/DezeStijn target=_blank class="u-url social" rel="external noopener me" title=Twitter><svg width="1.2em" height="1.2em" viewBox="0 0 16 16"><path fill="currentcolor" d="M5.032 14.286c6.037.0 9.34-4.837 9.34-9.032.0-.137.0-.274-.01-.41A6.56 6.56.0 0016 3.2c-.6.256-1.235.425-1.885.5a3.207 3.207.0 001.443-1.757c-.645.37-1.35.63-2.085.77a3.322 3.322.0 00-1.862-.958 3.384 3.384.0 00-2.082.334 3.223 3.223.0 00-1.442 1.49 3.08 3.08.0 00-.208 2.03 9.57 9.57.0 01-3.747-.963A9.269 9.269.0 011.114 2.292a3.086 3.086.0 00-.36 2.314c.189.787.68 1.475 1.376 1.924A3.344 3.344.0 01.64 6.132v.04c0 .734.263 1.444.743 2.01a3.3 3.3.0 001.89 1.102c-.483.128-.99.146-1.482.055a3.19 3.19.0 001.168 1.577 3.36 3.36.0 001.9.627A6.732 6.732.0 010 12.86a9.527 9.527.0 005.032 1.423"/></svg></a><a href=https://ko-fi.com/s4squatch target=_blank class="u-url social" rel="external noopener" title=Kofi><svg width="1.2em" height="1.2em" viewBox="0 0 24 24" fill="currentcolor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="M23.881 8.948c-.773-4.085-4.859-4.593-4.859-4.593H.723c-.604.0-.679.798-.679.798s-.082 7.324-.022 11.822c.164 2.424 2.586 2.672 2.586 2.672s8.267-.023 11.966-.049c2.438-.426 2.683-2.566 2.658-3.734 4.352.24 7.422-2.831 6.649-6.916zm-11.062 3.511c-1.246 1.453-4.011 3.976-4.011 3.976s-.121.119-.31.023c-.076-.057-.108-.09-.108-.09-.443-.441-3.368-3.049-4.034-3.954-.709-.965-1.041-2.7-.091-3.71.951-1.01 3.005-1.086 4.363.407.0.0 1.565-1.782 3.468-.963 1.904.82 1.832 3.011.723 4.311zm6.173.478c-.928.116-1.682.028-1.682.028V7.284h1.77s1.971.551 1.971 2.638c0 1.913-.985 2.667-2.059 3.015z"/></svg></a><p class=footnote>&copy; 2019
• <a class="p-name u-url" href=https://sequr.be>Sequr</a>
• <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank rel="external noopener">CC BY-NC-SA 4.0</a></p></div></aside><section class="content container"><article class="post h-entry"><header class=info><h1 class="post-title p-name u-url"><a href=https://sequr.be/blog/2021/11/shelly-plus-setup-and-home-assistant-integration/>Shelly Plus setup and Home Assistant integration</a></h1><div class=headline><div><span class="h-card p-author">DezeStijn
</span><span class=whitespace>• </span><time datetime=2021-11-05T00:00:00+0100 class="post-date dt-published">Nov 5, 2021
</time><span class=whitespace>• </span><span class=reading-time><span>6 mins read</span></span></div><ul class=tags><li class="tag-Home Automation"><a class=p-category href=https://sequr.be/categories/home-automation>Home Automation</a></li><li class=tag-Shelly><a class=p-category href=https://sequr.be/categories/shelly>Shelly</a></li></ul></div></header><main class=e-content><h2 id=intro>Intro</h2><p>Starting with the Shelly Pro 4PM and the Shelly Plus 1 / 1PM not long thereafter, Allterco launched a second generation of Shelly devices.
These devices are based on the more powerful ESP32 (compared to the ESP8266 in the 1st Gen devices) and come with some extra features.</p><p>Once I get enough experience with the new Plus/Pro series of Shelly, I may dedicate a blog post on these new features and make a comparison between Gen 1 and Gen 2 devices.
However, I can already say that I like the extra terminals of the Shelly Plus 1PM.
They allow you to continue the existing wire while you&rsquo;re retrofitting &lsquo;dumb&rsquo; switches, without needing to add Wago terminals in an already very cramped space.</p><p>In this blog post, I&rsquo;ll run through setting up a <a href=https://shelly.cloud/knowledge-base/devices/shelly-plus-1pm/ title="Shelly Plus 1PM" rel=external target=_blank>Shelly Plus 1PM</a> and integrating it into Home Assistant using the built-in integration.
The process should be similar for other 2nd Generation devices.</p><figure class=center><img src=shelly_plus1PM.png alt="Shelly Plus 1PM"><figcaption class=center>© Shelly Cloud - Shelly Plus 1PM</figcaption></figure><p>If you want some more information on the Shelly and how to wire it, have a look at an older blog post of mine: <a href=/blog/2020/07/intro-into-shelly/ title="Intro into Shelly">Intro into Shelly</a>.</p><h2 id=setting-up-the-shelly-plus-1pm>Setting up the Shelly Plus 1PM</h2><p>Even though Allterco has launched a new mobile app for the Shelly 2nd Gen devices, which includes setting up the device over Bluetooth,
I&rsquo;ll stick to the trusted method of using the Web UI.</p><p>Feel free to use the new mobile app to setup the Shelly.
If you&rsquo;re planning on integrating the Shelly in Home Assistant, you probably won&rsquo;t use the Shelly app as much.</p><h3 id=powering-the-shelly>Powering the Shelly</h3><p>I&rsquo;d advise doing the initial setup of the Shelly before actually installing it in the wall.
To do this, you&rsquo;ll need an old extension cord (which you cut open), <a href=https://s.click.aliexpress.com/e/_AZ3QAr title="Power cord - AliExpress" rel=external target=_blank>power cord</a>, or other method of getting power to the Shelly while it&rsquo;s on your <em>workbench</em>.</p><p>Hook up Live to one of the L terminals (the Plus 1PM has 3 L terminals) and Neutral to on the N terminals (the Plus 1PM has 2).
If you&rsquo;re powering the Shelly Plus with a DC power supply, make sure you connect DC+ to the N terminal and Ground to the L terminal.</p><table><thead><tr><th style=text-align:center></th><th style=text-align:center></th></tr></thead><tbody><tr><td style=text-align:center><figure class=center><img src=shelly_plus1PM_workbench-schema.png alt="Diagram of Shelly Plus 1PM connected to Live and Neutral"><figcaption class=center>Workbench diagram for Shelly Plus 1PM</figcaption></figure></td><td style=text-align:center><figure class=center><img src=shelly_plus1PM_workbench.png alt="Shelly Plus 1 connected to Live and Neutral"><figcaption class=center>Shelly Plus 1 on the &lsquo;workbench&rsquo;</figcaption></figure></td></tr></tbody></table><h3 id=connecting-to-the-web-ui>Connecting to the Web UI</h3><p>Once the Shelly is powered on, it will begin broadcasting a wireless network named <code>ShellyPlus1PM-[MAC address]</code>.</p><ol><li>Connect to this network using your smartphone (or tablet, laptop, &mldr;).
If a pop-up warns you about not having internet access click on &ldquo;Stay connected&rdquo;.</li><li>Browse to http://192.168.33.1</li><li>Open the <em>Networks</em> tab and fill in your WiFi information under <em>Wifi 1</em>.<br>Toggle the <em>Enable</em> button and click <em>Apply</em>.</li></ol><figure class=center><img src=shelly_plus1PM_wifi.png alt="Shelly Plus 1PM WiFi settings"><figcaption class=center>Connecting the Shelly to your WiFi</figcaption></figure><p>The Shelly will now connect to your home (or IoT) WiFi network.
You can now connect your phone to your home WiFi again and continue the configuration via the Web Interface at the Shelly&rsquo;s new IP.<br>To find the IP, look in the DHCP Lease table of your router.</p><h4 id=tip-using-http-api>Tip: using HTTP API</h4><p>Are you preparing multiple devices using the WebUI and you&rsquo;re getting tired of typing or copy/pasting the WiFi SSID and key over and over again?
Use the HTTP to set the WiFi information with 1 URL.</p><p>Connect to the Shelly&rsquo;s AP and go to the following URL (of course, with your own WiFi SSID and key):</p><ul><li>Shelly 1st Gen: <code>http://192.168.33.1/settings/sta?enabled=1&amp;ssid=YOUR_WIFI_SSID_HERE&amp;key=YOUR_WIFI_KEY_HERE</code></li></ul><h3 id=configuring-the-shelly>Configuring the Shelly</h3><h4 id=firmware-update>Firmware update</h4><p>Before anything else, the first thing you want to do is updating the Shelly to the latest firmware.</p><figure class=center><img src=shelly_plus1PM_firmware.png alt="Shelly Plus Firmware Update menu"><figcaption class=center>Checking for firmware updates</figcaption></figure><h4 id=disable-access-point>Disable Access Point</h4><p>Now that the Shelly is connected to your home WiFi, it&rsquo;s a good idea to disable the Access Point of the Shelly.
This way, visitors cannot connect directly to the device anymore.
If you want to keep the AP available as a backup, at least configure a password.</p><ol><li>Open the <em>Networks</em> tab</li><li>Click on <em>Access Point</em> to open the menu settings</li><li>Toggle the <em>Enable</em> button so it&rsquo;s turned off.<br><strong>Note</strong> At this moment there&rsquo;s a weird quirck in how you disable the AP.
DO NOT click on &ldquo;Apply&rdquo; as this will re-enable the Access Point.</li></ol><figure class=center><img src=shelly_plus1PM_accesspoint.png alt="Shelly Plus Access Point menu"><figcaption class=center>Disabling the Access Point</figcaption></figure><h4 id=configure-channel-name>Configure Channel Name</h4><p>The <a href=https://www.home-assistant.io/integrations/shelly title="Home Assistant - Shelly integration" rel=external target=_blank>Shelly integration</a> will name the entities of the device after the Channel Name, if set.
If you don&rsquo;t manually set one, the entities will be named after the device ID and the default channel name, e.g. <code>ShellyPlus1PM-xxxxxxxxxxxx switch_0</code>.</p><ol><li>Open the <em>Channel settings</em> tab</li><li>Click on <em>Channel name</em> top open the menu settings</li><li>Enter a name and click <em>Apply</em></li></ol><figure class=center><img src=shelly_plus1PM_channelname.png alt="Shelly Plus Channel Name menu"><figcaption class=center>Setting the Channel name</figcaption></figure><h4 id=set-the-consumption-type>Set the Consumption Type</h4><p>By default the Shelly will be added as a switch.
If the Shelly is connected to a light switch, you&rsquo;ll probably want it to be added as a <code>light.</code> entity.</p><p>To do so, set the Consumption Type to <em>Lights</em>.</p><figure class=center><img src=shelly_plus1PM_consumptiontype.png alt="Shelly Plus Consumption Type menu"><figcaption class=center>Setting the Consumption Type</figcaption></figure><h4 id=inputoutput-settings>Input/Output settings</h4><p>A final, yet important, setting is the input/output behaviour of the Shelly.</p><p>What you configure here will depend on the type of switch connected to the Shelly, if any, and the state in which you want the Shelly to power on (e.g. after a power outage).</p><p>These settings are found under <em>Channel Settings</em> > <em>Input output settings</em>.</p><p>In my case, I connected a button (momentary switch) to the Shelly and I want the Shelly to power on in the &ldquo;Off&rdquo; state.</p><figure class=center><img src=shelly_plus1PM_inputoutput.png alt="Shelly Plus Input Output Settings menu"><figcaption class=center>Setting button type and power on behaviour</figcaption></figure><h2 id=integrating-in-home-assistant>Integrating in Home Assistant</h2><p>With everything configured, it&rsquo;s time to integrate the Shelly into Home Assistant.
You may want to do this while the Shelly is still at your workbench, so you can hear the relay click etc., you may want to wire it into its final destination already.</p><p>Usually, Home Assistant will automatically discover the Shelly once it&rsquo;s powered up (or rebooted) if mDNS etc. work.
If not, you&rsquo;ll manually need to add a new Shelly integration and enter the Shelly&rsquo;s IP.</p><figure class=center><img src=shelly_plus1PM_ha_integration.png alt="Home Assistant discovered the Shelly Plus 1PM"><figcaption class=center>Home Assistant discovered the Shelly Plus 1PM</figcaption></figure><p>Once you either confirm you want to add the automatically discovered Shelly, or you added it manually, a new device will be available under the [Shelly Integration][ha-integrations].
Clicking through on the device will show the usual device page with all the entities that were automatically created for the Shelly.
You&rsquo;ll notice some entities are disabled by default, e.g. device temperature or the firmware update check, you can manually enable these if you want to use them.</p><p>The <em>Controls</em> section will hold either a <code>switch.</code> or <code>light.</code> entity based on what you configured before.
And the name of the entities will either start with the <em>Channel Name</em> you entered before or the default value.</p><figure class=center><img src=shelly_plus1PM_device.png alt="Home Assistant Device page for the Shelly"><figcaption class=center>Shelly device page in Home Assistant</figcaption></figure><p>Notice how the device page also has a <em>Visit Device</em> button.
This will bring you straight to the Web UI of the Shelly without you having to look up the device&rsquo;s IP or hostname.</p><h2 id=done>Done</h2><p>And that&rsquo;s it.
The Shelly has been set up and is working perfectly via Home Assistant :)</p><p>You can now add the switch/light entity to a Lovelace dashboard and easily control whatever the Shelly is connected to.
Home Assistant automations and scripts will be able to control your Shelly as well, helping you automate a little bit more of your life.</p><p>If you have any questions regarding the Shelly devices, I advise you to check out the <a href=https://www.facebook.com/groups/ShellyIoTCommunitySupport title="Shelly support group (English Version)" rel=external target=_blank>Shelly Facebook Page</a>.
Questions re. Home Assistant can be asked in the <a href=https://www.facebook.com/groups/HomeAssistant title="Home Assistant" rel=external target=_blank>Home Assistant</a> Facebook community.</p><p>Now onto the next one :)</p></main><hr><footer><div class=footer><p><div class=previous-post><a href="https://sequr.be/blog/2021/10/aliexpress-11-11-sales/?ref=footer"><span style=font-weight:700>« Previous</span><br>AliExpress 11-11 sales</a><div class=next-post><a href="https://sequr.be/blog/2022/07/disabling-quick-glance-discover-on-oneplus/?ref=footer"><span style=font-weight:700>Next »</span><br>Disabling Quick Glance (Discover) on OnePlus</a></div></p></div></footer></article></section><aside class=article-toc><div class=toc-wrapper><h4 id=contents></h4><nav id=TableOfContents><ul><li><a href=#intro>Intro</a></li><li><a href=#setting-up-the-shelly-plus-1pm>Setting up the Shelly Plus 1PM</a><ul><li><a href=#powering-the-shelly>Powering the Shelly</a></li><li><a href=#connecting-to-the-web-ui>Connecting to the Web UI</a><ul><li><a href=#tip-using-http-api>Tip: using HTTP API</a></li></ul></li><li><a href=#configuring-the-shelly>Configuring the Shelly</a><ul><li><a href=#firmware-update>Firmware update</a></li><li><a href=#disable-access-point>Disable Access Point</a></li><li><a href=#configure-channel-name>Configure Channel Name</a></li><li><a href=#set-the-consumption-type>Set the Consumption Type</a></li><li><a href=#inputoutput-settings>Input/Output settings</a></li></ul></li></ul></li><li><a href=#integrating-in-home-assistant>Integrating in Home Assistant</a></li><li><a href=#done>Done</a></li></ul></nav></div></aside></div></body></html>