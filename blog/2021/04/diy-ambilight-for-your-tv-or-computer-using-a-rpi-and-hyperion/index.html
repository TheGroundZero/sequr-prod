<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-US lang=en-US><head><title itemprop=name>DIY Ambilight for your TV or computer using a RPi and Hyperion :: Sequr</title>
<meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=robots content="noodp, noydir"><meta name=googlebot content="noodp, noydir"><meta name=url content="https://sequr.be/blog/2021/04/diy-ambilight-for-your-tv-or-computer-using-a-rpi-and-hyperion/" itemprop=url><link rel=icon href=/favicon.ico><meta itemprop=name content="DIY Ambilight for your TV or computer using a RPi and Hyperion"><meta itemprop=description content="Setting up DIY ambilighting for my TV using a Raspberry Pi and Hyperion"><meta itemprop=datePublished content="2021-04-18T00:00:00+02:00"><meta itemprop=dateModified content="2023-03-30T00:00:00+02:00"><meta itemprop=wordCount content="2739"><meta itemprop=image content="https://sequr.be/blog/2021/04/diy-ambilight-for-your-tv-or-computer-using-a-rpi-and-hyperion/cover.png"><meta itemprop=keywords content="Home Automation,Hyperion,Ambilight,Raspberry Pi"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://sequr.be/blog/2021/04/diy-ambilight-for-your-tv-or-computer-using-a-rpi-and-hyperion/cover.png"><meta name=twitter:title content="DIY Ambilight for your TV or computer using a RPi and Hyperion"><meta name=twitter:description content="Setting up DIY ambilighting for my TV using a Raspberry Pi and Hyperion"><meta name=twitter:creator content="@DezeStijn"><meta name=twitter:label1 content="Written by"><meta name=twitter:data1 content="DezeStijn"><meta name=twitter:label2 content="Est. reading time"><meta name=twitter:data2 content="13 mins read"><meta property="og:url" content="https://sequr.be/blog/2021/04/diy-ambilight-for-your-tv-or-computer-using-a-rpi-and-hyperion/"><meta property="og:site_name" content="Sequr"><meta property="og:title" content="DIY Ambilight for your TV or computer using a RPi and Hyperion"><meta property="og:description" content="Setting up DIY ambilighting for my TV using a Raspberry Pi and Hyperion"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2021-04-18T00:00:00+02:00"><meta property="article:modified_time" content="2023-03-30T00:00:00+02:00"><meta property="article:tag" content="Home Automation"><meta property="article:tag" content="Hyperion"><meta property="article:tag" content="Ambilight"><meta property="article:tag" content="Raspberry Pi"><meta property="og:image" content="https://sequr.be/blog/2021/04/diy-ambilight-for-your-tv-or-computer-using-a-rpi-and-hyperion/cover.png"><meta name=description content="Setting up DIY ambilighting for my TV using a Raspberry Pi and Hyperion"><meta property="og:updated_time" content="2023-03-30T00:00:00+02:00"><link rel=sitemap type=application/xml title=Sitemap href=https://sequr.be/sitemap.xml><link rel=alternate type=text/mf2+html href=https://sequr.be/><meta name=apple-mobile-web-app-title content="DIY Ambilight for your TV or computer using a RPi and Hyperion"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><link rel=webmention href=https://webmention.io/sequr.be/webmention><meta name=fediverse:creator content="@TerraGloba@mastodon-belgium.be"><link rel=stylesheet href=/css/bundle.min.308a714c50df5143bc08878001fede0511b3f9022c4c129848a3643270ab2f10.css integrity="sha256-MIpxTFDfUUO8CIeAAf7eBRGz+QIsTBKYSKNkMnCrLxA=" crossorigin=anonymous><script defer type=text/javascript src=/js/bundle.min.145453261a7755f5042a854c4213501d215a8fbe34c08d181c40f803f1315e74.js integrity="sha256-FFRTJhp3VfUEKoVMQhNQHSFaj740wI0YHED4A/ExXnQ=" crossorigin=anonymous></script></head><body class=dark-theme><div class=wrapper><aside class="sidebar h-card background-image"><div class="container sidebar-sticky"><div class=light-dark align=right><button class=btn-light-dark title="Toggle light/dark mode"><svg class="moon" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentcolor" d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278z"/></svg><svg class="sun" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentcolor" d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></svg></button></div><div class="sidebar-about hcard"><h1 class=brand><a href=https://sequr.be/><img src=/logo.png class="u-logo u-photo" alt="Sequr brand image">
</a><a href=https://sequr.be/ class="u-url p-org"><h1>Sequr</h1></a></h1><p class="lead p-note">Writeups and random stuff about infosec and life</p></div><nav><ul class=sidebar-nav><li class=heading><a href=/about/ title=About>About</a></li><li class=heading><a href=/blog/ title=Blog>Blog</a></li><li class=sub-heading>Recent</li><li class=bullet><a href=/blog/2025/03/automatically-generate-cover-for-blog-post/ title="Automatically generate cover for blog post" hreflang=en>Automated blog cover post</a></li><li class=bullet><a href=/blog/2025/02/flashing-the-sonoff-powr3-with-tasmota/ title="Flashing the Sonoff POWR3 with Tasmota" hreflang=en>Tasmota on Sonoff POWR3</a></li><li class=bullet><a href=/blog/2025/01/sending-my-first-webmention-from-scratch/ title="Sending my first webmention from scratch" hreflang=en>My first Webmention</a></li><li class=heading><a href=/shoppinglist/ title=Shopping>Shopping</a></li><li class=heading><a href=/privacy/ title=Privacy>Privacy</a></li></ul></nav><a target=_blank class=social title="Atom Feed" href=/atom.xml><svg width="1em" height="1.2em" viewBox="0 0 1280 1280"><g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)" fill="currentcolor"><path d="M2295 11929c-284-12-642-45-707-65-17-5-18-63-18-1039 0-569 4-1036 8-1039 5-3 74 6 153 19 510 86 1168 95 1789 25 1348-153 2602-677 3670-1531 385-308 820-744 1126-1129 842-1060 1362-2313 1514-3650 70-621 61-1279-25-1789-13-79-22-148-19-153 3-4 471-8 1039-8h1035l5 23c51 225 85 942 67 1419-23 605-77 1044-198 1617-294 14e2-927 2734-1823 3846-1043 1295-2364 2259-3909 2854-1158 447-2451 656-3707 6e2z"/><path d="M2255 7845c-269-25-620-81-667-106-17-9-18-55-18-899 0-706 3-890 13-890 6 0 66 18 132 41 130 44 288 79 467 105 154 21 577 30 749 15 1207-107 2267-823 2814-1902 166-327 268-637 330-1001 38-227 48-384 42-662-8-348-44-590-126-831-23-66-41-126-41-132 0-10 184-13 890-13 844 0 890 1 899 18 27 50 88 452 110 725 14 162 14 624 1 782-59 703-233 1323-545 1945-481 956-1313 1788-2270 2268-620 310-1239 483-1940 542-165 14-669 10-840-5z"/><path d="M2519 3815c-391-66-725-336-868-703-79-201-96-462-45-677 83-344 338-641 666-774 116-47 205-69 330-80 412-39 811 153 1040 5e2 193 292 240 648 128 981-135 403-492 699-914 757-1e2 14-241 12-337-4z"/></g></svg></a><a href=https://bsky.app/profile/sequr.be target=_blank class="u-url social" rel="external noopener me" title=Bluesky><svg width="1.2em" height="1.2em" viewBox="0 0 568 501"><path fill="currentcolor" d="M123.121 33.6637C188.241 82.5526 258.281 181.681 284 234.873c25.719-53.192 95.759-152.3204 160.879-201.2093C491.866-1.61183 568-28.9064 568 57.9464 568 75.2916 558.055 203.659 552.222 224.501c-20.275 72.453-94.155 90.933-159.875 79.748C507.222 323.8 536.444 388.56 473.333 453.32c-119.86 122.992-172.272-30.859-185.702-70.281C285.169 375.812 284.017 372.431 284 375.306 283.983 372.431 282.831 375.812 280.369 383.039c-13.43 39.422-65.842 193.273-185.7023 70.281C31.5556 388.56 60.7778 323.8 175.653 304.249 109.933 315.434 36.0535 296.954 15.7778 224.501 9.94525 203.659.0 75.2916.0 57.9464.0-28.9064 76.1345-1.61183 123.121 33.6637z"/></svg></a><a href=https://mastodon-belgium.be/@TerraGloba target=_blank class="u-url social" rel="external noopener me" title=Mastodon>
<svg width="1.2em" height="1.2em" viewBox="0 0 24 24"><path fill="currentcolor" d="M20.94 14c-.28 1.41-2.44 2.96-4.97 3.26-1.31.15-2.6.3-3.97.24-2.25-.11-4-.54-4-.54v.62c.32 2.22 2.22 2.35 4.03 2.42 1.82.05 3.44-.46 3.44-.46l.08 1.65s-1.28.68-3.55.81c-1.25.07-2.81-.03-4.62-.5-3.92-1.05-4.6-5.24-4.7-9.5l-.01-3.43c0-4.34 2.83-5.61 2.83-5.61C6.95 2.3 9.41 2 11.97 2h.06c2.56.0 5.02.3 6.47.96.0.0 2.83 1.27 2.83 5.61.0.0.04 3.21-.39 5.43M18 8.91c0-1.08-.3-1.91-.85-2.56-.56-.63-1.3-.96-2.23-.96-1.06.0-1.87.41-2.42 1.23l-.5.88-.5-.88c-.56-.82-1.36-1.23-2.43-1.23-.92.0-1.66.33-2.23.96C6.29 7 6 7.83 6 8.91v5.26h2.1V9.06c0-1.06.45-1.62 1.36-1.62 1 0 1.5.65 1.5 1.93v2.79h2.07V9.37c0-1.28.5-1.93 1.51-1.93.9.0 1.35.56 1.35 1.62v5.11H18V8.91z"/></svg></a><a href=https://github.com/TheGroundZero target=_blank class="u-url social" rel="external noopener me" title=Github><svg width="1.2em" height="1.2em" viewBox="-2 -2 24 24"><path fill="currentcolor" d="M18.88 1.099C18.147.366 17.265.0 16.233.0H3.746C2.714.0 1.832.366 1.099 1.099.366 1.832.0 2.714.0 3.746v12.487c0 1.032.366 1.914 1.099 2.647.733.733 1.615 1.099 2.647 1.099H6.66c.19.0.333-.007.429-.02a.504.504.0 00.286-.169c.095-.1.143-.245.143-.435l-.007-.885c-.004-.564-.006-1.01-.006-1.34l-.3.052c-.19.035-.43.05-.721.046a5.555 5.555.0 01-.904-.091 2.026 2.026.0 01-.872-.39 1.651 1.651.0 01-.572-.8l-.13-.3a3.25 3.25.0 00-.41-.663c-.186-.243-.375-.407-.566-.494l-.09-.065a.956.956.0 01-.17-.156.723.723.0 01-.117-.182c-.026-.061-.004-.111.065-.15.07-.04.195-.059.378-.059l.26.04c.173.034.388.138.643.311a2.1 2.1.0 01.631.677c.2.355.44.626.722.813.282.186.566.28.852.28.286.0.533-.022.742-.065a2.59 2.59.0 00.585-.196c.078-.58.29-1.028.637-1.34a8.907 8.907.0 01-1.333-.234 5.314 5.314.0 01-1.223-.507 3.5 3.5.0 01-1.047-.872c-.277-.347-.505-.802-.683-1.365-.177-.564-.266-1.215-.266-1.952.0-1.049.342-1.942 1.027-2.68-.32-.788-.29-1.673.091-2.652.252-.079.625-.02 1.119.175.494.195.856.362 1.086.5.23.14.414.257.553.352a9.233 9.233.0 012.497-.338c.859.0 1.691.113 2.498.338l.494-.312a6.997 6.997.0 011.197-.572c.46-.174.81-.221 1.054-.143.39.98.424 1.864.103 2.653.685.737 1.028 1.63 1.028 2.68.0.737-.089 1.39-.267 1.957-.177.568-.407 1.023-.689 1.366a3.65 3.65.0 01-1.053.865c-.42.234-.828.403-1.223.507a8.9 8.9.0 01-1.333.235c.45.39.676 1.005.676 1.846v3.11c0 .147.021.266.065.357a.36.36.0 00.208.189c.096.034.18.056.254.064.074.01.18.013.318.013h2.914c1.032.0 1.914-.366 2.647-1.099.732-.732 1.099-1.615 1.099-2.647V3.746c0-1.032-.367-1.914-1.1-2.647z"/></svg></a><a href=https://twitter.com/DezeStijn target=_blank class="u-url social" rel="external noopener me" title=Twitter><svg width="1.2em" height="1.2em" viewBox="0 0 16 16"><path fill="currentcolor" d="M5.032 14.286c6.037.0 9.34-4.837 9.34-9.032.0-.137.0-.274-.01-.41A6.56 6.56.0 0016 3.2c-.6.256-1.235.425-1.885.5a3.207 3.207.0 001.443-1.757c-.645.37-1.35.63-2.085.77a3.322 3.322.0 00-1.862-.958 3.384 3.384.0 00-2.082.334 3.223 3.223.0 00-1.442 1.49 3.08 3.08.0 00-.208 2.03 9.57 9.57.0 01-3.747-.963A9.269 9.269.0 011.114 2.292a3.086 3.086.0 00-.36 2.314c.189.787.68 1.475 1.376 1.924A3.344 3.344.0 01.64 6.132v.04c0 .734.263 1.444.743 2.01a3.3 3.3.0 001.89 1.102c-.483.128-.99.146-1.482.055a3.19 3.19.0 001.168 1.577 3.36 3.36.0 001.9.627A6.732 6.732.0 010 12.86a9.527 9.527.0 005.032 1.423"/></svg></a><a href=https://ko-fi.com/s4squatch target=_blank class="u-url social" rel="external noopener" title=Kofi><svg width="1.2em" height="1.2em" viewBox="0 0 24 24"><path fill="currentcolor" d="M23.881 8.948c-.773-4.085-4.859-4.593-4.859-4.593H.723c-.604.0-.679.798-.679.798s-.082 7.324-.022 11.822c.164 2.424 2.586 2.672 2.586 2.672s8.267-.023 11.966-.049c2.438-.426 2.683-2.566 2.658-3.734 4.352.24 7.422-2.831 6.649-6.916zm-11.062 3.511c-1.246 1.453-4.011 3.976-4.011 3.976s-.121.119-.31.023c-.076-.057-.108-.09-.108-.09-.443-.441-3.368-3.049-4.034-3.954-.709-.965-1.041-2.7-.091-3.71.951-1.01 3.005-1.086 4.363.407.0.0 1.565-1.782 3.468-.963 1.904.82 1.832 3.011.723 4.311zm6.173.478c-.928.116-1.682.028-1.682.028V7.284h1.77s1.971.551 1.971 2.638c0 1.913-.985 2.667-2.059 3.015z"/></svg></a><p class=footnote>&copy; 2019
• <a class="p-name u-url" href=https://sequr.be>Sequr</a>
• <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank rel="external noopener">CC BY-NC-SA 4.0</a></p><a href=https://sequr.be/en hreflang=en-US title=English class=u-translation-of rel=alternate><span class="flag fi fi-gb"></span>
</a><a href=https://sequr.be/nl hreflang=nl-BE title=Nederlands class=u-translation-of rel=alternate><span class="flag fi fi-nl"></span></a></div></aside><section class="content container"><article class="post h-entry"><header class=info><h1 class=post-title><a href=https://sequr.be/blog/2021/04/diy-ambilight-for-your-tv-or-computer-using-a-rpi-and-hyperion/ class="p-name u-url" rel=bookmark>DIY Ambilight for your TV or computer using a RPi and Hyperion</a></h1><div class=headline><div><span class="h-card p-author">DezeStijn</span><span class=whitespace> • </span><time datetime=2021-04-18T00:00:00+0200 class="post-date dt-published">Apr 18, 2021</time><span class=whitespace> </span><time datetime=2023-03-30T00:00:00+0200 class="post-date dt-updated">(Mar 30, 2023)
</time><span class=whitespace>• </span><span class=reading-time><data class=p-duration value=PT13M>13 mins read</data></span></div><ul class=tags><li class="tag-Home Automation"><a class=p-category href=https://sequr.be/categories/home-automation>Home Automation</a></li></ul></div></header><main class=e-content><h2 id=introduction>Introduction</h2><p>After seeing some videos by DrZzs and others on setting up DIY ambient lighting for your TV,
I knew I wanted to have this :)</p><p>I took some time to find the correct hardware on AliExpress, noting that I don&rsquo;t want to downgrade my video from 4K to e.g. 1080P
and that I might need to look out for DRM protections (<a href=https://en.wikipedia.org/wiki/High-bandwidth_Digital_Content_Protection title="High-bandwidth Digital Content Protection - Wikipedia" rel=external target=_blank>HDCP</a>), I put together my shopping list and the waiting could start &mldr;</p><p>In this blog post I&rsquo;ll explain how I set up DIY Ambilight for my TV using Hyperion.</p><p>Since I have 2 devices providing video to my television (set-top box for digital television and a <a href=https://osmc.tv/vero/ title="OSMC Vero 4K+" rel=external target=_blank>OSMC Vero 4K+</a> for my own video collection),
I also needed to add a HDMI switch to the loop.<br>I specifically looked for a device that could either auto-detect the playing device, or at least came with a remote.
The remote I could then link to my Broadlink RM4Pro so that Home Assistant can automatically switch to the correct source.</p><figure class=center><img src=hyperbian.gif alt="Logo of HyperBian"><figcaption class=center>HyperBian</figcaption></figure><h2 id=requirements-shopping-list>Requirements (shopping list)</h2><p>You can get everything you need from AliExpress.<br>Get it even cheaper using a <a href=https://a.aliexpress.com/_mOHBLsP title="AliExpress €21,00 coupon" rel=external target=_blank>welcome coupon</a>.</p><ul><li>A Raspberry Pi that&rsquo;ll run <a href=https://docs.hyperion-project.org/ title=Hyperion rel=external target=_blank>Hyperion</a> via <a href=https://github.com/hyperion-project/HyperBian title="HyperBian - Raspberry Pi OS Lite with Hyperion" rel=external target=_blank>HyperBian</a>.<br>Some processing power is required for smooth effects, <a href=https://s.click.aliexpress.com/e/_9xuW1h title="Raspberry Pi 3B/3B+" rel=external target=_blank>RPi 3B+</a> should suffice.</li><li><a href=https://www.aliexpress.com/item/4000627262613.html title="Kingston micro-SD card class 10" rel=external target=_blank>Micro-SD card</a> with at least 2GB size</li><li>Individually addressable RGB LED strips.<br>I went for <a href=https://s.click.aliexpress.com/e/_ADFqfc title="BTF-Lighting WS2812 RGB Individually Addressable Led Strip" rel=external target=_blank>WS2812B eco</a> with a black PCB, 60 LEDs/m.
5V suffices for the length we need and it&rsquo;s easier because the RPi also runs on 5V.</li><li><a href=https://s.click.aliexpress.com/e/_Aa86O2 title="4K 60fps capture card with 1080P 60fps capture feed" rel=external target=_blank>Video capture card</a>.<br>The 4K 60fps model is only a little bit more expensive than the 4K 30fps one.</li><li><a href=https://s.click.aliexpress.com/e/_9Is2aX title="HDMI 2.0 (4K) / 2.1 (8K) cables" rel=external target=_blank>HDMI cable</a>.<br>You&rsquo;ll need an extra HDMI cable between the HDMI switch and capture card (if applicable) and between the capture card and your television.<br>Make sure it supports the max. resolution and framerate your video sources provide.
I got HDMI 2.0 cables which support 4K 60fps. HDMI 1.4 suffices for 4K 30fps, and for 8K you should get HDMI 2.1 cables.</li><li>Power supply unit (PSU) <a href=https://s.click.aliexpress.com/e/_A8Ai0Q title="KAYPW power supply (open frame style)" rel=external target=_blank>frame style</a> (5V 60W/12A) or <a href=https://s.click.aliexpress.com/e/_A88KnM title="BOLE DENGYE power supply (power brick style)" rel=external target=_blank>power brick style</a> (5V 50W/10A).<br>The required power output will depend on how much LEDs you have (length and LED density) and how bright you have them.</li><li><a href=https://www.aliexpress.com/item/32821229368.html title="10 meters electrical wire, tinned copper, PVC insulated" rel=external target=_blank>Electrical wire</a> to connect the power supply, the LED strip, the RPi, &mldr;</li><li>Sacrificial <a href=https://s.click.aliexpress.com/e/_A3mxVG title="MicroUSB cable" rel=external target=_blank>microUSB cable</a><br>We&rsquo;ll only need to microUSB port for powering the RPi.</li><li><a href=https://s.click.aliexpress.com/e/_Ao690a title="Wago style wire connectors" rel=external target=_blank>Wire connectors</a> (<a href=https://s.click.aliexpress.com/e/_A2Jgft title="Wago style wire connectors (2 in 4 out)" rel=external target=_blank>different model</a>)<br>For wiring power cables for the LED strip and RPi into the power supply.</li><li>Female-male <a href=https://www.aliexpress.com/item/33015288855.html title="Dupont wires MM/FM/FF" rel=external target=_blank>Dupont wire</a><br>To get the data signal from the RPi to the LED strip.</li></ul><h3 id=optional>Optional</h3><p>These items may be useful, but aren&rsquo;t required.</p><ul><li><a href=https://www.aliexpress.com/item/32849519375.html title="HDMI 2.0 switch 4K HDR 60fps HDCP 2.2" rel=external target=_blank>HDMI switch</a> in case you have more than 1 HDMI input device.</li><li><a href=https://s.click.aliexpress.com/e/_AtIBp8 title="BTF-Lighting corner connectors" rel=external target=_blank>LED strip corner connectors</a> (3 pin 10mm)</li><li><a href=https://s.click.aliexpress.com/e/_9wv0yW title="3pin JST connectors" rel=external target=_blank>JST Connectors</a>, can be used for power injection or connecting strips</li><li><a href=https://s.click.aliexpress.com/e/_ALlYgA title="Heat shrink solder connectors" rel=external target=_blank>Heat shrink solder connectors &ldquo;solderless connection&rdquo;</a>, if you don&rsquo;t feel like soldering</li><li><a href=https://s.click.aliexpress.com/e/_AdcCIf title="Double-sided foam tape" rel=external target=_blank>Double sided tape</a> to stick the devices and LED strip to the back of the TV</li><li><a href=https://www.aliexpress.com/item/1005001841920230.html title="Velcro tape" rel=external target=_blank>Velcro tape</a> to stick the devices to the back of the TV if you don&rsquo;t want to use regular tape.</li><li><a href=https://s.click.aliexpress.com/e/_AZNLoi title="Extension word" rel=external target=_blank>Extension cord</a> to power the power supply</li><li><a href=https://www.aliexpress.com/item/33001628978.html title="Wire crimp connector set" rel=external target=_blank>Wire crimp connector set</a> (ferrules) for connecting stranded wires in the Wago connectors.</li><li><a href=https://s.click.aliexpress.com/e/_AOXLmF title="Insulated Crimp Ring/Fork Terminals" rel=external target=_blank>Wire ring/fork connectors</a> for securely connecting wires onto the power supply</li><li><a href=https://s.click.aliexpress.com/e/_AtwAUx title="RM102Pro Digital Multimeter" rel=external target=_blank>Digital Multimeter</a> to measure output of the PSU and the power drop over the LED strip.</li></ul><p>I also advise reading the &ldquo;Lessons Learned&rdquo; section at the bottom before starting with the project.</p><table><thead><tr><th style=text-align:center></th><th style=text-align:center></th><th style=text-align:center></th><th style=text-align:center></th></tr></thead><tbody><tr><td style=text-align:center><figure class=center><img src=ambilight_ledstrips.png alt="LED strip WS2812Beco"><figcaption class=center>LED strip</figcaption></figure></td><td style=text-align:center><figure class=center><img src=ambilight_psu.png alt="Power Supply Unit (PSU)"><figcaption class=center>Power supply</figcaption></figure></td><td style=text-align:center><figure class=center><img src=ambilight_capturecard.png alt="Capture card"><figcaption class=center>Capture card</figcaption></figure></td><td style=text-align:center><figure class=center><img src=ambilight_hdmiswitch.png alt="HDMI switch"><figcaption class=center>HDMI switch</figcaption></figure></td></tr></tbody></table><h2 id=wiring-the-led-strip>Wiring the LED strip</h2><ol><li>You&rsquo;ll first want to measure the 4 sides of your television and envision where you want to place the LED strips.<br>The LED strips should be on the back of the television, near the edge.<br>Take into account any bumps, holes, connections, &mldr; that may cause issues for sticking the LED strip.<br>Note that the corner connectors take up quite some space.</li><li>Cut the LED strips to size.<br>Look at the LED strip for the copper pads you can cut in.<br>If you want more space on the pads to solder, you could cut at the end of the copper strip and sacrifice a LED at each cut.</li><li>Stick the LEDs to the TV.
Start from one corner and work your way around the TV.<br>Hyperion by default assumes you start in the top-left corner and work clockwise (as seen from the front) but we can change the config later on.<br>Take into account where you want to stick the RPi as you&rsquo;ll need to be able to connect the data wire to your Pi&rsquo;s GPIO pin.
You can solder the corners, use the corner clips I linked above or carefully bend the LED strips.</li><li>If you want to inject power, solder an additional power wire at the end of the strip on the + and GND terminals.<br>This is only really necessary if you notice a drop in brightness near the end of the strip.</li></ol><p>Note: I used some <a href=https://s.click.aliexpress.com/e/_AdcCIf title="Double-sided foam tape" rel=external target=_blank>double-sided foam tape</a> to secure the LED strip to the back of the TV, as well as the hardware we&rsquo;ll be adding later.<br>This holds quite a bit better than the adhesive the LED-strips come with.</p><h2 id=providing-power>Providing power</h2><p>As mentioned above, we&rsquo;ll be using a sacrificial micro-USB power cable to power the Raspberry Pi.<br>This is because the circuit behind the micro-USB port provides overpower protection to the RPi (some RPi models include a fuse).<br>You can power the RPi using the GPIO pins, but these won&rsquo;t protect the RPi in case of a voltage or current spike.</p><ol><li>Powering the power supply<ul><li>Connect the extension cord to the correct terminals on the input side of the power supply.<br>Use ring/spade connectors to provide a secure connection.</li><li>Plug the extension cord in the wall socket.<br>Make sure you don&rsquo;t touch any exposed terminals while the power supply is powered!</li></ul></li><li>Finetune the output<br>The RPi expects a power input of around 5.1V.
The LED strips will work with this as well.<ul><li>Hook your multimeter onto the output of the PSU and set it to DC Voltage mode.</li><li>Use the knob at the right of the terminals to tune the PSU to deliver 5.100-5.150V (a tiny margin for voltage drop).</li></ul></li><li>Unpower the power supply again.</li><li>Hook the output of the power supply (the 5V side) up to some Wago style wire connectors.<ul><li>Use a red wire for positive (+V) and a black for negative (-V/GND).<br>Ring or fork connectors are advised for a secure connection with the PSU.<br>Finish stranded wires with ferrules at the other end to provide a secure connection with the Wagos.</li><li>Note that this wire will carry the load of the LEDs and RPi, so this needs to be the thickest of the bunch.</li></ul></li><li>Provide power to the Rapsberry Pi<ul><li>Cut the sacrificial micro-USB power cable and expose the 2 power leads (usually black and red).</li><li>Put the red wire in the wire connector with the positive wires and the black with the gnd/negative.</li><li>If the wire is too short, solder some extra piece of wire to them. Perhaps using the &lsquo;solderless&rsquo; heat shrink tubes linked above.</li><li>Plug the micro-USB connector into the Raspberry Pi.</li></ul></li><li>Powering the LED strip<ul><li>At the beginning of the LED strip, there&rsquo;s an additional pair with a red (positive) and white (negative/ground) wire.
These can be used to power the strip.
Solder an extra length of red/black wire to this pair to extend the wire to get to the power supply.<br>However, I prefer to solder some thicker wire directly to the copper pads.</li><li>If power injection is needed, you can also solder an extra red/black wire onto the copper pads at the end of the strip.</li></ul></li><li>If you now provide power to the Power Supply Unit (PSU) again, the RPi should power on.
The LED strip will most likely not turn on, as no signal is received on the data line yet.</li></ol><figure class=center><img src=ambilight_installed.png alt="Picture of back of TV with everything installed"><figcaption class=center>Everything installed on back of the TV</figcaption></figure><p>Everything can be installed on a small board and attached to the VESA mounts on the back of the television.
This keeps everything nice and tidy.</p><h2 id=installing-hyperion>Installing Hyperion</h2><p>Installating Hyperion is extremely easy.
You just need to follow the short <a href=https://docs.hyperion-project.org/en/user/Installation.html title="Hyperion - Install Hyperion" rel=external target=_blank>guide</a> on the Hyperion website.<br>I went with the HyperBian image as it comes with Hyperion pre-installed.</p><ol><li>Download and extract the latest HyperBian image</li><li>Write the HyperBian image to your micro-SD card using Raspberry Pi Imager, balenaEtcher, Win32DiskImager, &mldr;</li><li>Setup WiFi and/or SSH, if needed/wanted
You&rsquo;ll need to add a <code>wpa_supplicant.conf</code> and <code>ssh</code> file to the boot partition of your SD-card before the first boot.
We discus this in a <a href=https://sequr.be/blog/2021/08/reading-ginlong-solis-inverter-over-serial-and-importing-in-home-assistant-over-mqtt/#wifi-and-ssh title="Reading Ginlong Solis inverter over serial and importing in Home Assistant over MQTT" rel=external target=_blank>different post</a>.</li><li>Put the micro-SD card in the Raspberry Pi and provide it with power to boot it up.</li></ol><p>Once the RPi has booted and Hyperion has started, you can open the web interface at
<code>http://&lt;ip of RPi>:8090</code> to configure Hyperion.</p><figure class=center><img src=hyperion_logo_light.png alt="Logo of Hyperion"><figcaption class=center>Hyperion</figcaption></figure><p>Tape the RPi to the back of the television to hide it.</p><h2 id=hooking-the-rpi-up-to-the-led-strip>Hooking the RPi up to the LED strip</h2><p>Use a Dupont wire or some soldering skills to connect the green data wire of the LED strip to GPIO18 (pin 12) on the Raspberry Pi.<br>The Dupont wire&rsquo;s male end can be pushed into the middle port of the LED strip&rsquo;s JST connector.</p><p>GPIO18 is the 6th pin from the left on the top/outside row.</p><figure class=center><img src=rpi-pinout.png alt="Image of pinout on a Raspberry Pi"><figcaption class=center><a href=https://www.raspberrypi-spy.co.uk/2012/06/simple-guide-to-the-rpi-gpio-header-and-pins/ rel=external target=_blank>https://www.raspberrypi-spy.co.uk/2012/06/simple-guide-to-the-rpi-gpio-header-and-pins/</a></figcaption></figure><h2 id=capturing-video>Capturing video</h2><p>The current setup is still quite boring as we can&rsquo;t match the colours of the LED strip to the image on our screen.<br>So lets add the capture card.</p><p>Note: If you have multiple HDMI sources for your television, first hook them all up to the HDMI switch linked above.<br>You can also tape this switch to the back of the television.</p><ol><li>Tape the capture card to the back of the television.</li><li>Connect the HDMI cable currently running to the HDMI Input of your television to the Input side of the capture card.</li><li>Get an additional HDMI cable and connect the Output side of the capture card to the HDMI Input of your television.</li><li>Connect the USB cables (one for power and one with the capture feed) of the capture card with the Paspberry Pi.</li></ol><h2 id=configuring-hyperion>Configuring Hyperion</h2><p>With the capture card connected to the Raspberry Pi, we can now setup Hyperion to match the LED string output with the captured video.</p><ul><li>Open the Hyperion Web UI at <code>http://&lt;IP.of.the.RPi>:8090</code></li><li>In the sidebar menu, open the <strong>Configuration</strong> section</li></ul><figure class=center><img src=ambilight_hyperionmenu.png alt="Hyperion sidebar menu"><figcaption class=center>Hyperion sidebar menu</figcaption></figure><h3 id=general>General</h3><ul><li>Under <strong>LED Hardware Instance Management</strong> give your ambilight instance a name.<br>I went for the plain-and-simple <em>Ambilight</em></li></ul><h3 id=led-hardware>LED Hardware</h3><ul><li><strong>LED Controller</strong><br>Select the correct <strong>Controller Type</strong>, <strong>RGB byte order</strong> and <strong>Maximum LED count</strong>.<br>The LED-strips I&rsquo;m using are of the <em>ws281x</em> type, with a <em>GRB</em> byte order and I have 180 LEDs in total.<br>If you&rsquo;re using a Raspberry Pi 3, set <strong>DMA channel</strong> to 10. <a href=https://github.com/jgarff/rpi_ws281x#important-warning-about-dma-channels title="rpi_ws281x - Important warning about DMA channels" rel=external target=_blank>more info</a>
The other settings shouldn&rsquo;t need to be changed.</li><li><strong>LED layout</strong><br>Enter the amount of LEDs you&rsquo;ve mounted to the top, bottom, left and right of your TV in the <strong>Classic Layout (LED Frame)</strong> section.<br>The view on this layout is ALWAYS of the FRONT of your TV.<br>At the bottom, in the <strong>LED Layout Preview</strong> you&rsquo;ll see how Hyperion will address your LED strip.<br>Change <strong>Input position</strong> and <strong>Reverse direction</strong> so the layout preview matches your actual configuration.</li></ul><p><strong>Update 2.0.0-alpha.10</strong><br>The names of these menus have changes to <em>LED Instances</em> and <em>LED Output</em>.<br>Before you can enable a <em>Source</em> for your instance, you need to enable it under <em>Capturing Hardware</em> first.</p><h3 id=capturing-hardware>Capturing hardware</h3><p>Here you can configure whether you want to capture the video output of the RPi itself and/or what&rsquo;s being captured via USB.
A lower Priority means this video input is preferred over the other.</p><ul><li>Unless you want to capture the display of the RPi itself, I suggest unchecking <em>Enable platform capture</em>.</li><li>Check the box next to <em>Enable USB Capture</em> and set a number as <em>Priority Channel</em> that&rsquo;s lower than that of Platform Capture (i.e. higher priorty).</li><li>Under <em>USB Capture</em> you shouldn&rsquo;t need to change anything.</li><li>If you want, you can enable <em>CEC detection</em> and/or <em>Signal detection</em>.<br>More info on those settings can be found at the bottom of the settings page.</li></ul><p><strong>Update 2.0.0-alpha.10</strong><br>Capture hardware is now off by default, you need to manually enable them.</p><h3 id=effects>Effects</h3><ul><li>Enable <em>Boot Effect/Color</em> if you want to have a nice effect when the RPi is booting.</li><li>I set <em>Background Effect/Color</em> to a solid black, so that the ambilight is turned off when Hyperion is &ldquo;idle&rdquo;.
You could pick a different effect (e.g., Cinema dim lights, Cinema brighten lights, Candle, &mldr;) if you want some ambient lighting of your TV while nothing&rsquo;s playing.</li></ul><p><strong>Update 2.0.0-alpha.10</strong><br>This section move to <em>LED Instances</em></p><h3 id=image-processing>Image Processing</h3><p>You shouldn&rsquo;t need to change anything here</p><p><strong>Update 2.0.0-alpha.10</strong><br>This section move to <em>LED Instances</em></p><h3 id=network-services>Network Services</h3><p>Make sure the JSON Server is active if you want to control Hyperion from Home Assistant.</p><h2 id=testing-the-setup>Testing the setup</h2><p>With everything connected and powered up, you can use the <strong>Effects Configurator</strong> to test certain effects.</p><p>Choose a <em>Template</em>, enter a random <em>Effect Name</em> and press <em>Start test</em>.</p><p>For example, running <em>Led Test</em> should give you alternating Red, Green, Blue, White and Black (off).<br>Increase to sleep time to something like 0.5s to see the colour sequence more clearly.<br>If the sequence doesn&rsquo;t match, you may need to change your RGB byte order.<br>Note that there&rsquo;s a <em>RGB Byte Order Wizard</em> available if you press the wand symbol at the top right.</p><h2 id=note-on-using-ws281x-leds>Note on using WS281x LEDs</h2><p>Hyperion uses the Raspberry Pi&rsquo;s hardware PWM (Pulse-width modulation) controller.
To interact with this controller, the software needs to run with <em>root</em> (admin) permissions.
Without it, your WS281x LED strip will not work!</p><p>You&rsquo;ll need to disable the Hyperion service running under the default &lsquo;pi&rsquo; user and relaunch it as &lsquo;root&rsquo;.</p><p>SSH into your Raspberry Pi and run the following commands:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># ssh pi@&lt;ip.of.raspberry.pi&gt; # password: raspberry</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Run Hyperion service as root</span>
</span></span><span style=display:flex><span>sudo systemctl disable --now hyperion@pi.service
</span></span><span style=display:flex><span>sudo systemctl enable --now hyperion@root.service
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Update Message of the Day to check correct service</span>
</span></span><span style=display:flex><span>sudo sed -i <span style=color:#e6db74>&#39;s/pi.service/root.service/&#39;</span> /etc/update-motd.d/10-hyperbian
</span></span></code></pre></div><p><strong>Note on security</strong><br>Running 3rd party software as root is against security good practices!<br>Do NOT run untrusted software with root/admin privileges!</p><h2 id=pitfalls--lessons-learned>Pitfalls / Lessons learned</h2><p>During this project I discovered I ordered some stuff that I didn&rsquo;t necessarily need for this project.
And looking back, there&rsquo;s some stuff I would have done differently.</p><p>Let&rsquo;s say I made these mistakes so you don&rsquo;t have to &mldr; :)</p><ul><li><strong>Corner connectors</strong><br>These corners, including the connectors for the strip and the corner pieces, are quite big.<br>You lose valuable LED space in the corners if you use them.<br>In the end I used one of the corner pieces but without the connector. I soldered it instead. Which was fine.<br>But in the future I&rsquo;d just go with soldered connections, reinforced with some heat shrink tubing for piece of mind.</li><li><strong>JST connectors</strong><br>Unless you&rsquo;re building a huge LED strip and you&rsquo;re pinned on using the tiny wires for power injection, there&rsquo;s no need in getting JST connectors.<br>I actually cut the wires from the spare connector that came with the strip to make the corner connections.<br>I added power injection at the end of the strip, using some 18AWG wire soldered onto the pads (and reinforced with some heat shrink).</li><li><strong>Double sided tape</strong><br>I strongly advise using double sided tape, maybe even foam tape over regular tape.<br>The adhesive of the LED strip is good in general.
But since I had to reposition the strip a few times, it didn&rsquo;t stick as well anymore.<br>The double sided sticky foam I&rsquo;m using, is incredibly strong. Maybe a bit too much even, it&rsquo;ll be a pain to take off again.<br>Added advantage of using the foam is that it adds a barrier between the strip and the TV for when you&rsquo;re soldering connections with the LED strip already taped.</li><li><strong>Ferrules and Wagos</strong><br>I&rsquo;m using no-brand Wago-style connectors (lever clamps) for this project.
They&rsquo;re rated for mains voltage and I&rsquo;m only running 5V through them, so I feel comfortable using them.<br>Since I&rsquo;m also using stranded wire, I&rsquo;m using ferrules to provide a proper connection within the Wago connectors.<br>Note that while the connectors may support up to 14 AWG / 2.5mm² wires, a 14 AWG ferrule (with some heat shrink around it) will barely, or most likely not, fit.
So make sure you use up to 16 AWG ferrules.</li></ul><table><thead><tr><th style=text-align:center></th><th style=text-align:center></th></tr></thead><tbody><tr><td style=text-align:center></td><td style=text-align:center></td></tr></tbody></table></main><hr><footer><div class=footer><p><div class=previous-post><a href="https://sequr.be/blog/2021/03/esp32-cam-and-esphome/?ref=footer"><span style=font-weight:700>« Previous</span><br>ESP32-cam and ESPHome</a><div class=next-post><a href="https://sequr.be/blog/2021/05/automating-my-lights-at-the-toilet-room/?ref=footer"><span style=font-weight:700>Next »</span><br>Automating my lights at the toilet room</a></div></p></div><a class=u-bridgy-fed href=https://fed.brid.gy/ hidden=from-humans></a></footer></article></section><aside class=article-toc><div class=toc-wrapper><h4 id=contents></h4><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#requirements-shopping-list>Requirements (shopping list)</a><ul><li><a href=#optional>Optional</a></li></ul></li><li><a href=#wiring-the-led-strip>Wiring the LED strip</a></li><li><a href=#providing-power>Providing power</a></li><li><a href=#installing-hyperion>Installing Hyperion</a></li><li><a href=#hooking-the-rpi-up-to-the-led-strip>Hooking the RPi up to the LED strip</a></li><li><a href=#capturing-video>Capturing video</a></li><li><a href=#configuring-hyperion>Configuring Hyperion</a><ul><li><a href=#general>General</a></li><li><a href=#led-hardware>LED Hardware</a></li><li><a href=#capturing-hardware>Capturing hardware</a></li><li><a href=#effects>Effects</a></li><li><a href=#image-processing>Image Processing</a></li><li><a href=#network-services>Network Services</a></li></ul></li><li><a href=#testing-the-setup>Testing the setup</a></li><li><a href=#note-on-using-ws281x-leds>Note on using WS281x LEDs</a></li><li><a href=#pitfalls--lessons-learned>Pitfalls / Lessons learned</a></li></ul></nav></div></aside></div></body></html>