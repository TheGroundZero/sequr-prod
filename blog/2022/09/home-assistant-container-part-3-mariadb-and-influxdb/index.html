<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-US lang=en-US><head><title itemprop=name>Home Assistant Container Part 3: MariaDB and InfluxDB :: Sequr</title>
<meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=robots content="noodp, noydir"><meta name=googlebot content="noodp, noydir"><meta name=url content="https://sequr.be/blog/2022/09/home-assistant-container-part-3-mariadb-and-influxdb/" itemprop=url><link rel=icon href=/favicon.ico><meta itemprop=name content="Home Assistant Container Part 3: MariaDB and InfluxDB"><meta itemprop=description content="In this third part of the Home Assistant Container series we’ll add MariaDB and InfluxDB to store our recorder and history data."><meta itemprop=datePublished content="2022-09-03T00:00:00+02:00"><meta itemprop=dateModified content="2024-09-05T00:00:00+02:00"><meta itemprop=wordCount content="1257"><meta itemprop=image content="https://sequr.be/blog/2022/09/home-assistant-container-part-3-mariadb-and-influxdb/cover.png"><meta itemprop=keywords content="Home Automation,Home Assistant,Container,Docker,Docker-Compose,MariaDB,Recorder,InfluxDB,History"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://sequr.be/blog/2022/09/home-assistant-container-part-3-mariadb-and-influxdb/cover.png"><meta name=twitter:title content="Home Assistant Container Part 3: MariaDB and InfluxDB"><meta name=twitter:description content="In this third part of the Home Assistant Container series we’ll add MariaDB and InfluxDB to store our recorder and history data."><meta name=twitter:creator content="@DezeStijn"><meta name=twitter:label1 content="Written by"><meta name=twitter:data1 content="DezeStijn"><meta name=twitter:label2 content="Est. reading time"><meta name=twitter:data2 content="6 mins read"><meta property="og:url" content="https://sequr.be/blog/2022/09/home-assistant-container-part-3-mariadb-and-influxdb/"><meta property="og:site_name" content="Sequr"><meta property="og:title" content="Home Assistant Container Part 3: MariaDB and InfluxDB"><meta property="og:description" content="In this third part of the Home Assistant Container series we’ll add MariaDB and InfluxDB to store our recorder and history data."><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2022-09-03T00:00:00+02:00"><meta property="article:modified_time" content="2024-09-05T00:00:00+02:00"><meta property="article:tag" content="Home Automation"><meta property="article:tag" content="Home Assistant"><meta property="article:tag" content="Container"><meta property="article:tag" content="Docker"><meta property="article:tag" content="Docker-Compose"><meta property="article:tag" content="MariaDB"><meta property="og:image" content="https://sequr.be/blog/2022/09/home-assistant-container-part-3-mariadb-and-influxdb/cover.png"><meta property="og:see_also" content="https://sequr.be/blog/2024/02/home-assistant-container-part-13-vs-code-code-server/"><meta property="og:see_also" content="https://sequr.be/blog/2022/12/home-assistant-container-part-12-migrating-to-podman/"><meta property="og:see_also" content="https://sequr.be/blog/2022/11/home-assistant-container-part-11-bluetooth-support/"><meta property="og:see_also" content="https://sequr.be/blog/2022/10/home-assistant-container-part-10-zigbee2mqtt/"><meta property="og:see_also" content="https://sequr.be/blog/2022/09/home-assistant-container-part-9-esphome/"><meta property="og:see_also" content="https://sequr.be/blog/2022/09/home-assistant-container-part-8-update-home-assistant-container/"><meta property="og:see_also" content="https://sequr.be/blog/2022/09/home-assistant-container-part-7-backing-up-home-assistant-container/"><meta name=description content="In this third part of the Home Assistant Container series we&rsquo;ll add MariaDB and InfluxDB to store our recorder and history data."><meta property="og:updated_time" content="2024-09-05T00:00:00+02:00"><link rel=sitemap type=application/xml title=Sitemap href=https://sequr.be/sitemap.xml><link rel=alternate type=text/mf2+html href=https://sequr.be/><meta name=apple-mobile-web-app-title content="Home Assistant Container Part 3: MariaDB and InfluxDB"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><link rel=webmention href=https://webmention.io/sequr.be/webmention><meta name=fediverse:creator content="@TerraGloba@mastodon-belgium.be"><link rel=stylesheet href=/css/bundle.min.308a714c50df5143bc08878001fede0511b3f9022c4c129848a3643270ab2f10.css integrity="sha256-MIpxTFDfUUO8CIeAAf7eBRGz+QIsTBKYSKNkMnCrLxA=" crossorigin=anonymous><script defer type=text/javascript src=/js/bundle.min.145453261a7755f5042a854c4213501d215a8fbe34c08d181c40f803f1315e74.js integrity="sha256-FFRTJhp3VfUEKoVMQhNQHSFaj740wI0YHED4A/ExXnQ=" crossorigin=anonymous></script></head><body class=dark-theme><div class=wrapper><aside class="sidebar h-card background-image"><div class="container sidebar-sticky"><div class=light-dark align=right><button class=btn-light-dark title="Toggle light/dark mode"><svg class="moon" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentcolor" d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278z"/></svg><svg class="sun" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentcolor" d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></svg></button></div><div class="sidebar-about hcard"><h1 class=brand><a href=https://sequr.be/><img src=/logo.png class="u-logo u-photo" alt="Sequr brand image">
</a><a href=https://sequr.be/ class="u-url p-org"><h1>Sequr</h1></a></h1><p class="lead p-note">Writeups and random stuff about infosec and life</p></div><nav><ul class=sidebar-nav><li class=heading><a href=/about/ title=About>About</a></li><li class=heading><a href=/blog/ title=Blog>Blog</a></li><li class=sub-heading>Recent</li><li class=bullet><a href=/blog/2025/03/automatically-generate-cover-for-blog-post/ title="Automatically generate cover for blog post" hreflang=en>Automated blog cover post</a></li><li class=bullet><a href=/blog/2025/02/flashing-the-sonoff-powr3-with-tasmota/ title="Flashing the Sonoff POWR3 with Tasmota" hreflang=en>Tasmota on Sonoff POWR3</a></li><li class=bullet><a href=/blog/2025/01/sending-my-first-webmention-from-scratch/ title="Sending my first webmention from scratch" hreflang=en>My first Webmention</a></li><li class=heading><a href=/shoppinglist/ title=Shopping>Shopping</a></li><li class=heading><a href=/privacy/ title=Privacy>Privacy</a></li></ul></nav><a target=_blank class=social title="Atom Feed" href=/atom.xml><svg width="1em" height="1.2em" viewBox="0 0 1280 1280"><g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)" fill="currentcolor"><path d="M2295 11929c-284-12-642-45-707-65-17-5-18-63-18-1039 0-569 4-1036 8-1039 5-3 74 6 153 19 510 86 1168 95 1789 25 1348-153 2602-677 3670-1531 385-308 820-744 1126-1129 842-1060 1362-2313 1514-3650 70-621 61-1279-25-1789-13-79-22-148-19-153 3-4 471-8 1039-8h1035l5 23c51 225 85 942 67 1419-23 605-77 1044-198 1617-294 14e2-927 2734-1823 3846-1043 1295-2364 2259-3909 2854-1158 447-2451 656-3707 6e2z"/><path d="M2255 7845c-269-25-620-81-667-106-17-9-18-55-18-899 0-706 3-890 13-890 6 0 66 18 132 41 130 44 288 79 467 105 154 21 577 30 749 15 1207-107 2267-823 2814-1902 166-327 268-637 330-1001 38-227 48-384 42-662-8-348-44-590-126-831-23-66-41-126-41-132 0-10 184-13 890-13 844 0 890 1 899 18 27 50 88 452 110 725 14 162 14 624 1 782-59 703-233 1323-545 1945-481 956-1313 1788-2270 2268-620 310-1239 483-1940 542-165 14-669 10-840-5z"/><path d="M2519 3815c-391-66-725-336-868-703-79-201-96-462-45-677 83-344 338-641 666-774 116-47 205-69 330-80 412-39 811 153 1040 5e2 193 292 240 648 128 981-135 403-492 699-914 757-1e2 14-241 12-337-4z"/></g></svg></a><a href=https://bsky.app/profile/sequr.be target=_blank class="u-url social" rel="external noopener me" title=Bluesky><svg width="1.2em" height="1.2em" viewBox="0 0 568 501"><path fill="currentcolor" d="M123.121 33.6637C188.241 82.5526 258.281 181.681 284 234.873c25.719-53.192 95.759-152.3204 160.879-201.2093C491.866-1.61183 568-28.9064 568 57.9464 568 75.2916 558.055 203.659 552.222 224.501c-20.275 72.453-94.155 90.933-159.875 79.748C507.222 323.8 536.444 388.56 473.333 453.32c-119.86 122.992-172.272-30.859-185.702-70.281C285.169 375.812 284.017 372.431 284 375.306 283.983 372.431 282.831 375.812 280.369 383.039c-13.43 39.422-65.842 193.273-185.7023 70.281C31.5556 388.56 60.7778 323.8 175.653 304.249 109.933 315.434 36.0535 296.954 15.7778 224.501 9.94525 203.659.0 75.2916.0 57.9464.0-28.9064 76.1345-1.61183 123.121 33.6637z"/></svg></a><a href=https://mastodon-belgium.be/@TerraGloba target=_blank class="u-url social" rel="external noopener me" title=Mastodon>
<svg width="1.2em" height="1.2em" viewBox="0 0 24 24"><path fill="currentcolor" d="M20.94 14c-.28 1.41-2.44 2.96-4.97 3.26-1.31.15-2.6.3-3.97.24-2.25-.11-4-.54-4-.54v.62c.32 2.22 2.22 2.35 4.03 2.42 1.82.05 3.44-.46 3.44-.46l.08 1.65s-1.28.68-3.55.81c-1.25.07-2.81-.03-4.62-.5-3.92-1.05-4.6-5.24-4.7-9.5l-.01-3.43c0-4.34 2.83-5.61 2.83-5.61C6.95 2.3 9.41 2 11.97 2h.06c2.56.0 5.02.3 6.47.96.0.0 2.83 1.27 2.83 5.61.0.0.04 3.21-.39 5.43M18 8.91c0-1.08-.3-1.91-.85-2.56-.56-.63-1.3-.96-2.23-.96-1.06.0-1.87.41-2.42 1.23l-.5.88-.5-.88c-.56-.82-1.36-1.23-2.43-1.23-.92.0-1.66.33-2.23.96C6.29 7 6 7.83 6 8.91v5.26h2.1V9.06c0-1.06.45-1.62 1.36-1.62 1 0 1.5.65 1.5 1.93v2.79h2.07V9.37c0-1.28.5-1.93 1.51-1.93.9.0 1.35.56 1.35 1.62v5.11H18V8.91z"/></svg></a><a href=https://github.com/TheGroundZero target=_blank class="u-url social" rel="external noopener me" title=Github><svg width="1.2em" height="1.2em" viewBox="-2 -2 24 24"><path fill="currentcolor" d="M18.88 1.099C18.147.366 17.265.0 16.233.0H3.746C2.714.0 1.832.366 1.099 1.099.366 1.832.0 2.714.0 3.746v12.487c0 1.032.366 1.914 1.099 2.647.733.733 1.615 1.099 2.647 1.099H6.66c.19.0.333-.007.429-.02a.504.504.0 00.286-.169c.095-.1.143-.245.143-.435l-.007-.885c-.004-.564-.006-1.01-.006-1.34l-.3.052c-.19.035-.43.05-.721.046a5.555 5.555.0 01-.904-.091 2.026 2.026.0 01-.872-.39 1.651 1.651.0 01-.572-.8l-.13-.3a3.25 3.25.0 00-.41-.663c-.186-.243-.375-.407-.566-.494l-.09-.065a.956.956.0 01-.17-.156.723.723.0 01-.117-.182c-.026-.061-.004-.111.065-.15.07-.04.195-.059.378-.059l.26.04c.173.034.388.138.643.311a2.1 2.1.0 01.631.677c.2.355.44.626.722.813.282.186.566.28.852.28.286.0.533-.022.742-.065a2.59 2.59.0 00.585-.196c.078-.58.29-1.028.637-1.34a8.907 8.907.0 01-1.333-.234 5.314 5.314.0 01-1.223-.507 3.5 3.5.0 01-1.047-.872c-.277-.347-.505-.802-.683-1.365-.177-.564-.266-1.215-.266-1.952.0-1.049.342-1.942 1.027-2.68-.32-.788-.29-1.673.091-2.652.252-.079.625-.02 1.119.175.494.195.856.362 1.086.5.23.14.414.257.553.352a9.233 9.233.0 012.497-.338c.859.0 1.691.113 2.498.338l.494-.312a6.997 6.997.0 011.197-.572c.46-.174.81-.221 1.054-.143.39.98.424 1.864.103 2.653.685.737 1.028 1.63 1.028 2.68.0.737-.089 1.39-.267 1.957-.177.568-.407 1.023-.689 1.366a3.65 3.65.0 01-1.053.865c-.42.234-.828.403-1.223.507a8.9 8.9.0 01-1.333.235c.45.39.676 1.005.676 1.846v3.11c0 .147.021.266.065.357a.36.36.0 00.208.189c.096.034.18.056.254.064.074.01.18.013.318.013h2.914c1.032.0 1.914-.366 2.647-1.099.732-.732 1.099-1.615 1.099-2.647V3.746c0-1.032-.367-1.914-1.1-2.647z"/></svg></a><a href=https://twitter.com/DezeStijn target=_blank class="u-url social" rel="external noopener me" title=Twitter><svg width="1.2em" height="1.2em" viewBox="0 0 16 16"><path fill="currentcolor" d="M5.032 14.286c6.037.0 9.34-4.837 9.34-9.032.0-.137.0-.274-.01-.41A6.56 6.56.0 0016 3.2c-.6.256-1.235.425-1.885.5a3.207 3.207.0 001.443-1.757c-.645.37-1.35.63-2.085.77a3.322 3.322.0 00-1.862-.958 3.384 3.384.0 00-2.082.334 3.223 3.223.0 00-1.442 1.49 3.08 3.08.0 00-.208 2.03 9.57 9.57.0 01-3.747-.963A9.269 9.269.0 011.114 2.292a3.086 3.086.0 00-.36 2.314c.189.787.68 1.475 1.376 1.924A3.344 3.344.0 01.64 6.132v.04c0 .734.263 1.444.743 2.01a3.3 3.3.0 001.89 1.102c-.483.128-.99.146-1.482.055a3.19 3.19.0 001.168 1.577 3.36 3.36.0 001.9.627A6.732 6.732.0 010 12.86a9.527 9.527.0 005.032 1.423"/></svg></a><a href=https://ko-fi.com/s4squatch target=_blank class="u-url social" rel="external noopener" title=Kofi><svg width="1.2em" height="1.2em" viewBox="0 0 24 24"><path fill="currentcolor" d="M23.881 8.948c-.773-4.085-4.859-4.593-4.859-4.593H.723c-.604.0-.679.798-.679.798s-.082 7.324-.022 11.822c.164 2.424 2.586 2.672 2.586 2.672s8.267-.023 11.966-.049c2.438-.426 2.683-2.566 2.658-3.734 4.352.24 7.422-2.831 6.649-6.916zm-11.062 3.511c-1.246 1.453-4.011 3.976-4.011 3.976s-.121.119-.31.023c-.076-.057-.108-.09-.108-.09-.443-.441-3.368-3.049-4.034-3.954-.709-.965-1.041-2.7-.091-3.71.951-1.01 3.005-1.086 4.363.407.0.0 1.565-1.782 3.468-.963 1.904.82 1.832 3.011.723 4.311zm6.173.478c-.928.116-1.682.028-1.682.028V7.284h1.77s1.971.551 1.971 2.638c0 1.913-.985 2.667-2.059 3.015z"/></svg></a><p class=footnote>&copy; 2019
• <a class="p-name u-url" href=https://sequr.be>Sequr</a>
• <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank rel="external noopener">CC BY-NC-SA 4.0</a></p><a href=https://sequr.be/en hreflang=en-US title=English class=u-translation-of rel=alternate><span class="flag fi fi-gb"></span>
</a><a href=https://sequr.be/nl hreflang=nl-BE title=Nederlands class=u-translation-of rel=alternate><span class="flag fi fi-nl"></span></a></div></aside><section class="content container"><article class="post h-entry"><header class=info><h1 class=post-title><a href=https://sequr.be/blog/2022/09/home-assistant-container-part-3-mariadb-and-influxdb/ class="p-name u-url" rel=bookmark>Home Assistant Container Part 3: MariaDB and InfluxDB</a></h1><div class=headline><div><span class="h-card p-author">DezeStijn</span><span class=whitespace> • </span><time datetime=2022-09-03T00:00:00+0200 class="post-date dt-published">Sep 3, 2022</time><span class=whitespace> </span><time datetime=2024-09-05T00:00:00+0200 class="post-date dt-updated">(Sep 5, 2024)
</time><span class=whitespace>• </span><span class=reading-time><data class=p-duration value=PT6M>6 mins read</data></span></div><ul class=tags><li class="tag-Home Automation"><a class=p-category href=https://sequr.be/categories/home-automation>Home Automation</a></li><li class="tag-HA Container"><a class=p-category href=https://sequr.be/categories/ha-container>HA Container</a></li></ul></div><p class=seriesname>Series: <a class=p-category href=https://sequr.be/series/ha-container>HA Container</a></p></header><main class=e-content><h2 id=intro>Intro</h2><p>We&rsquo;re continuing where we left off after <a href=https://sequr.be/blog/2022/09/home-assistant-container-part-2-home-assistant-container/ title="Part 2: Home Assistant Container">Part 2: Home Assistant Container</a>.</p><p>In this Part 3, we&rsquo;ll set up the MariaDB and InfluxDB containers which we&rsquo;ll use to store the data from the Home Assistant recorder and history.</p><h2 id=install-mariadb-and-influxdb-containers>Install MariaDB and InfluxDB containers</h2><p>Continuing in the same trend as the <a href=https://sequr.be/blog/2022/08/home-assistant-container-part-1-install-debian-docker-and-portainer/ title="Part 1: Install Debian, Docker and Portainer">previous</a> <a href=https://sequr.be/blog/2022/09/home-assistant-container-part-2-home-assistant-container/ title="Part 2: Home Assistant Container">two</a> posts, we start of with the <code>docker-compose.yaml</code> config for our new containers.</p><p>The configuration for these containers looks as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>version</span>: <span style=color:#e6db74>&#39;3.0&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>services</span>:
</span></span><span style=display:flex><span>  [<span style=color:#ae81ff>...]</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>homeassistant</span>:
</span></span><span style=display:flex><span>    [<span style=color:#ae81ff>...]</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#f92672>mariadb</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>mariadb</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>mariadb</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>restart</span>: <span style=color:#ae81ff>unless-stopped</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#34;3306:3306/tcp&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>environment</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>TZ=Europe/Brussels</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD}</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>MYSQL_DATABASE=${MYSQL_HA_DATABASE}</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>MYSQL_USER=${MYSQL_HA_USER}</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>MYSQL_PASSWORD=${MYSQL_HA_PASSWORD}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>volumes</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>/opt/mariadb/data:/var/lib/mysql</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>/opt/mariadb/config/:/etc/mysql/conf.d</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#f92672>influxdb</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>influxdb</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>influxdb</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>restart</span>: <span style=color:#ae81ff>unless-stopped</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#34;8086:8086/tcp&#34;</span>   <span style=color:#75715e># So we can access the WebUI</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>environment</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>TZ=Europe/Brussels</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>DOCKER_INFLUXDB_INIT_MODE=setup</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>DOCKER_INFLUXDB_INIT_USERNAME=${INFLUXDB_USER}</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>DOCKER_INFLUXDB_INIT_PASSWORD=${INFLUXDB_PASSWORD}</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>DOCKER_INFLUXDB_INIT_ORG=${INFLUXDB_ORG}</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>DOCKER_INFLUXDB_INIT_BUCKET=${INFLUXDB_BUCKET}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>volumes</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>/opt/influxdb/data:/var/lib/influxdb2</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>/opt/influxdb/config/:/etc/influxdb2</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ulimits</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>nofile</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>soft</span>: <span style=color:#ae81ff>32768</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>hard</span>: <span style=color:#ae81ff>32768</span>
</span></span></code></pre></div><h3 id=environment-variables>Environment variables</h3><p>You&rsquo;ll notice we added some environment variables in the configuration, such as <code>${MYSQL_ROOT_PASSWORD}</code>.</p><p>These placeholders ensure we don&rsquo;t put sensitive data in our <code>docker-compose.yaml</code>.
This is especially useful for when we want to back-up and/or distribute our Docker config in a Version Control System (VCS) like GitHub.</p><p>To provide a value for these environment variable, create a <code>.env</code> file in the same directory as the <code>docker-compose.yaml</code> file, i.e. <code>/opt</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>sudo nano .env
</span></span><span style=display:flex><span><span style=color:#75715e># Add secrets, see below</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Also grant our non-admin account to this file</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#  so we don&#39;t need sudo to edit in the future</span>
</span></span><span style=display:flex><span>sudo chown root:docker .env
</span></span><span style=display:flex><span>sudo chmod g+w .env
</span></span></code></pre></div><p>The <code>.env</code> file would look like this.
Make any modifications (like passwords!) here.</p><pre tabindex=0><code>MYSQL_ROOT_PASSWORD=mariadbrootpassword
MYSQL_HA_DATABASE=ha_db
MYSQL_HA_USER=homeassistant
MYSQL_HA_PASSWORD=mariadbhapassword

INFLUXDB_USER=homeassistant
INFLUXDB_PASSWORD=influxhapassword
INFLUXDB_ORG=sequr
INFLUXDB_BUCKET=homeassistant
</code></pre><p>If you run the config check before creating the <code>.env</code> file, you&rsquo;ll also be warned about this.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>docker-compose -f docker-compose.yaml config
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>WARN<span style=color:#f92672>[</span>0000<span style=color:#f92672>]</span> The <span style=color:#e6db74>&#34;MYSQL_HA_DATABASE&#34;</span> variable is not set. Defaulting to a blank string.
</span></span><span style=display:flex><span>WARN<span style=color:#f92672>[</span>0000<span style=color:#f92672>]</span> The <span style=color:#e6db74>&#34;MYSQL_HA_USER&#34;</span> variable is not set. Defaulting to a blank string.
</span></span><span style=display:flex><span>WARN<span style=color:#f92672>[</span>0000<span style=color:#f92672>]</span> The <span style=color:#e6db74>&#34;MYSQL_HA_PASSWORD&#34;</span> variable is not set. Defaulting to a blank string.
</span></span><span style=display:flex><span>WARN<span style=color:#f92672>[</span>0000<span style=color:#f92672>]</span> The <span style=color:#e6db74>&#34;INFLUXDB_USER&#34;</span> variable is not set. Defaulting to a blank string.
</span></span><span style=display:flex><span>WARN<span style=color:#f92672>[</span>0000<span style=color:#f92672>]</span> The <span style=color:#e6db74>&#34;INFLUXDB_PASSWORD&#34;</span> variable is not set. Defaulting to a blank string.
</span></span><span style=display:flex><span>WARN<span style=color:#f92672>[</span>0000<span style=color:#f92672>]</span> The <span style=color:#e6db74>&#34;INFLUXDB_ORG&#34;</span> variable is not set. Defaulting to a blank string.
</span></span><span style=display:flex><span>WARN<span style=color:#f92672>[</span>0000<span style=color:#f92672>]</span> The <span style=color:#e6db74>&#34;INFLUXDB_BUCKET&#34;</span> variable is not set. Defaulting to a blank string.
</span></span></code></pre></div><h3 id=dependencies>Dependencies</h3><p>In case we reboot our Docker system, we also want the Home Assistant container to wait for the MariaDB and InfluxDB container to be online before starting.
This is to ensure the connection from HA to these systems doesn&rsquo;t fail and no data is lost.</p><p>So add the following to the config entry to the <code>homeassistant</code> container:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span>[<span style=color:#ae81ff>...]</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>homeassistant</span>:
</span></span><span style=display:flex><span>    [<span style=color:#ae81ff>...]</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>depends_on</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>mariadb</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>influxdb</span>
</span></span></code></pre></div><h3 id=initial-run>Initial run</h3><p>You can now run <code>docker-compose up -d</code> to install the MariaDB and InfluxDB containers.</p><p>You&rsquo;ll also notice the Home Assistant container is recreated as its config has changed.</p><figure class=center><img src=containers.png alt="Screenshot of Portainer showing our running containers"><figcaption class=center>4 containers so far</figcaption></figure><h3 id=influxdb-token>InfluxDB Token</h3><p>Now that our InfluxDB container is running we&rsquo;ll open the WebUI to <a href=https://docs.influxdata.com/influxdb/cloud/security/tokens/create-token/#create-a-token-in-the-influxdb-ui title="Create a token in the InfluxDB UI" rel=external target=_blank>grab a token</a>.
We&rsquo;ll need this token later to grant Home Assistant access to our newly created bucket.</p><p>Open a browser and go to <code>http://&lt;ip.of.our.box>:8086</code> and login using the credentials you use in the <code>.env</code> file.</p><figure class=center><img src=influxdb_login.png alt="InfluxDB login screen"><figcaption class=center>Login to InfluxDB</figcaption></figure><p>Go to the API Tokens menu and generate a new read/write token specifically for our Home Assistant bucket.</p><figure class=center><img src=influxdb_token.png alt="InfluxDB Generate Read/Write API Token"><figcaption class=center>Creating a RW token for our homeassistant bucket</figcaption></figure><p>Click on the name of the token and a window will appear showing you the token.
We&rsquo;ll need this token in a later stage.</p><h2 id=home-assistant-configuration>Home Assistant configuration</h2><p>With the containers up and running the first half of the job is done.
We still need to tell Home Assistant about these new database.</p><p>For this, we will be adding our first Home Assistant configurations.</p><p><strong>EDIT 2022-09-08</strong><br>We&rsquo;ll be editing our config via the terminal.
If you prefer to do this in an online editor, have a look at <a href=https://sequr.be/blog/2022/09/home-assistant-container-part-6-editing-configuration.yaml-from-within-home-assistant/ title="Part 6: Editing configuration.yaml from within Home Assistant">Part 6</a> and then come back here ;)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>cd /opt/homeassistant/config/
</span></span><span style=display:flex><span>sudo nano configuration.yaml
</span></span></code></pre></div><p>You&rsquo;ll see some config is already present.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># Loads default set of integrations. Do not remove.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>default_config</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Text to speech</span>
</span></span><span style=display:flex><span><span style=color:#f92672>tts</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>platform</span>: <span style=color:#ae81ff>google_translate</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>automation</span>: !<span style=color:#ae81ff>include automations.yaml</span>
</span></span><span style=display:flex><span><span style=color:#f92672>script</span>: !<span style=color:#ae81ff>include scripts.yaml</span>
</span></span><span style=display:flex><span><span style=color:#f92672>scene</span>: !<span style=color:#ae81ff>include scenes.yaml</span>
</span></span></code></pre></div><p>Add the following config below it:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>recorder</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>db_url</span>: !<span style=color:#ae81ff>secret mariadb</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>purge_keep_days</span>: <span style=color:#ae81ff>10</span>   <span style=color:#75715e># default</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>history</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>influxdb</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>api_version</span>: <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>ssl</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>host</span>: !<span style=color:#ae81ff>secret influxdb_host</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>port</span>: <span style=color:#ae81ff>8086</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>token</span>: !<span style=color:#ae81ff>secret influxdb_token</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>organization</span>: !<span style=color:#ae81ff>secret influx_org</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>bucket</span>: <span style=color:#ae81ff>homeassistant</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>tags</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>source</span>: <span style=color:#ae81ff>HomeAssistant</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>tags_attributes</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>friendly_name</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>default_measurement</span>: <span style=color:#ae81ff>units</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>ignore_attributes</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>icon</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>exclude</span>:    <span style=color:#75715e># Customise to fit your needs</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>entities</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>zone.home</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>domains</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>persistent_notification</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>person</span>
</span></span></code></pre></div><h3 id=more-secrets>More secrets</h3><p>You&rsquo;ll have noticed I made some <em>secret</em> references in the config above, like <code>!secret mariadb</code>.</p><p>Home Assistant also allows you to hide <a href=https://www.home-assistant.io/docs/configuration/secrets/ title="Storing secrets - Home Assistant" rel=external target=_blank>secrets</a> from the <code>configuration.yaml</code> file so you can safely share it.
Just like with the environment variables we used in our <code>docker-compose.yaml</code>, these are references to a value stored elsewhere.
In this case, these are key-value pairs in a file named <code>secrets.yaml</code> located in the same folder as the <code>configuration.yaml</code>.</p><p>So let&rsquo;s create this file and add our secrets to it.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>cd /opt/homeassistant/config
</span></span><span style=display:flex><span>sudo nano secrets.yaml
</span></span></code></pre></div><p>Notice this file already exists and contains an example entry:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># Use this file to store secrets like usernames and passwords.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Learn more at https://www.home-assistant.io/docs/configuration/secrets/</span>
</span></span><span style=display:flex><span><span style=color:#f92672>some_password</span>: <span style=color:#ae81ff>welcome</span>
</span></span></code></pre></div><p>Remove this example, and add your own secrets.
Make sure you match the configuration of the <code>.env</code> file.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>mariadb</span>: <span style=color:#e6db74>&#34;mysql://homeassistant:mariadbhapassword@&lt;ip.of.our.box&gt;:3306/ha_db?charset=utf8mb4&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>influxdb_host</span>: <span style=color:#e6db74>&#34;&lt;ip.of.our.box&gt;&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>influxdb_token</span>: <span style=color:#e6db74>&#34;influxdbtoken&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>influx_org</span>: <span style=color:#e6db74>&#34;sequr&#34;</span>
</span></span></code></pre></div><p>Since our Home Assistant container uses the host network, it cannot find the MariaDB and InfluxDB containers through their hostname.
That&rsquo;s why we make use of the port forwards and refer to them via <code>&lt;ip.of.our.box></code>.</p><h3 id=restart>Restart</h3><p>After saving the files, open the Home Assistant web interface and go to Developer Tools > YAML.
Click <code>Check Configuration</code> to make sure you didn&rsquo;t make any typos are made a mistake in spacing.</p><figure class=center><img src=config_valid.png alt="Configuration validation reports a valid configuration"><figcaption class=center>Our config is validated</figcaption></figure><p>If you get a green &ldquo;Configuration valid!&rdquo; you&rsquo;re good and you can press the <code>Restart</code> button on the right to restart Home Assistant, which will apply all changes we made to the <code>configuration.yaml</code> file.</p><h2 id=manage-portainer-from-within-home-assistant>Manage Portainer from within Home Assistant</h2><p>One thing we&rsquo;ll want to do fairly often once we start adding add-ons is having an option to quickly have a look at them without needing to open extra browser windows.</p><p><strong>Note:</strong> This has changed since <a href=https://www.home-assistant.io/blog/2024/04/03/release-20244/#webpage-dashboard title="2024.4 release notes - webpage dashboard" rel=external target=_blank>Home Assistant 2024.4</a>.
You can now use a <a href=https://www.home-assistant.io/dashboards/dashboards/#webpage-dashboard title="Webpage dashboard" rel=external target=_blank>Webpage Dashboard</a> to embed a webpage in your dashboard.</p><p><del>For this, we&rsquo;ll make use of <a href=https://www.home-assistant.io/integrations/panel_iframe/ title="iframe Panel integration" rel=external target=_blank>iframe Panel</a>&rsquo;s.</del>
<del>This integration will add additional panels to the Home Assistant sidebar, which will open an application of our choosing within the HA dashboard.</del></p><p><del>To add an iframe for Portainer, add the following code to the <code>configuration.yaml</code> file:</del></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># Outdated, use web dashboard</span>
</span></span><span style=display:flex><span><span style=color:#f92672>panel_iframe</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>portainer</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>title</span>: <span style=color:#ae81ff>Portainer</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>url</span>: <span style=color:#e6db74>&#34;https://192.168.10.106:9443/#!/2/docker/containers&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>icon</span>: <span style=color:#ae81ff>mdi:docker</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>require_admin</span>: <span style=color:#66d9ef>true</span>
</span></span></code></pre></div><p>Check your configuration again and restart Home Assistant.
Once Home Assistant is back online, you&rsquo;ll find the Docker logo in the sidebar and clicking it will open Portainer in the dashboard view.</p><figure class=center><img src=cover.png alt="Portainer from within Home Assistant"><figcaption class=center>Portainer-ception</figcaption></figure><p>And that wraps it up for part 3 of the Home Assistant Container series.</p><p>Next we&rsquo;ll add some useful add-ons to Home Assistant, like the <a href=https://sequr.be/blog/2022/09/home-assistant-container-part-4-mosquitto-docker-container/ title="Part 4: Mosquitto Docker Container">Mosquitto MQTT broker</a> and <a href=https://sequr.be/blog/2022/09/home-assistant-container-part-5-node-red/ title="Part 5: Node-RED">Node-RED</a>.</p><hr><p>PS: the eagle-eyed may have noticed an additional container in my last screenshot.
I also added <code>adminer</code> to my toolkit.
Adminer, formerly known as phpMyAdmin, can be used to connect to and manage the MariaDB database.</p><p>If you want to copy my config, add the following service to <code>docker-compose.yaml</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span>  <span style=color:#f92672>adminer</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>adminer</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>adminer</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>restart</span>: <span style=color:#ae81ff>unless-stopped</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#34;8080:8080/tcp&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>depends_on</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>mariadb</span>
</span></span></code></pre></div><h2 id=changelog>Changelog</h2><ul><li>2024-09-05 - Reference Webpage dashboard replacing <code>iframe_panel</code> since 2024.04</li></ul></main><hr><footer><div class=footer><p>This is a post in the <span style=font-weight:700><a href=https://sequr.be/series/ha-container>HA Container</a></span> series.<br>Other posts in this series:<ul class=series><li>Feb 12, 2024 -
<a href=/blog/2024/02/home-assistant-container-part-13-vs-code-code-server/>Home Assistant Container Part 13: VS Code code-server</a></li><li>Dec 2, 2022 -
<a href=/blog/2022/12/home-assistant-container-part-12-migrating-to-podman/>Home Assistant Container Part 12: Migrating to Podman</a></li><li>Nov 25, 2022 -
<a href=/blog/2022/11/home-assistant-container-part-11-bluetooth-support/>Home Assistant Container Part 11: Bluetooth support</a></li><li>Oct 4, 2022 -
<a href=/blog/2022/10/home-assistant-container-part-10-zigbee2mqtt/>Home Assistant Container Part 10: Zigbee2MQTT</a></li><li>Sep 15, 2022 -
<a href=/blog/2022/09/home-assistant-container-part-9-esphome/>Home Assistant Container Part 9: ESPHome</a></li><li>Sep 11, 2022 -
<a href=/blog/2022/09/home-assistant-container-part-8-update-home-assistant-container/>Home Assistant Container Part 8: Update Home Assistant Container</a></li><li>Sep 9, 2022 -
<a href=/blog/2022/09/home-assistant-container-part-7-backing-up-home-assistant-container/>Home Assistant Container Part 7: Backing up Home Assistant Container</a></li><li>Sep 8, 2022 -
<a href=/blog/2022/09/home-assistant-container-part-6-editing-configuration.yaml-from-within-home-assistant/>Home Assistant Container Part 6: Editing configuration.yaml from within Home Assistant</a></li><li>Sep 7, 2022 -
<a href=/blog/2022/09/home-assistant-container-part-5-node-red/>Home Assistant Container Part 5: Node-RED</a></li><li>Sep 5, 2022 -
<a href=/blog/2022/09/home-assistant-container-part-4-mosquitto-docker-container/>Home Assistant Container Part 4: Mosquitto Docker Container</a></li><li>Sep 3, 2022 -
Home Assistant Container Part 3: MariaDB and InfluxDB</li><li>Sep 2, 2022 -
<a href=/blog/2022/09/home-assistant-container-part-2-home-assistant-container/>Home Assistant Container Part 2: Home Assistant Container</a></li><li>Aug 31, 2022 -
<a href=/blog/2022/08/home-assistant-container-part-1-install-debian-docker-and-portainer/>Home Assistant Container Part 1: Install Debian, Docker and Portainer</a></li></ul></p><p><div class=previous-post><a href="https://sequr.be/blog/2022/09/home-assistant-container-part-2-home-assistant-container/?ref=footer"><span style=font-weight:700>« Previous</span><br>Home Assistant Container Part 2: Home Assistant...</a><div class=next-post><a href="https://sequr.be/blog/2022/09/home-assistant-container-part-4-mosquitto-docker-container/?ref=footer"><span style=font-weight:700>Next »</span><br>Home Assistant Container Part 4: Mosquitto Docker...</a></div></p></div><a class=u-bridgy-fed href=https://fed.brid.gy/ hidden=from-humans></a></footer></article></section><aside class=article-toc><div class=toc-wrapper><h4 id=contents></h4><nav id=TableOfContents><ul><li><a href=#intro>Intro</a></li><li><a href=#install-mariadb-and-influxdb-containers>Install MariaDB and InfluxDB containers</a><ul><li><a href=#environment-variables>Environment variables</a></li><li><a href=#dependencies>Dependencies</a></li><li><a href=#initial-run>Initial run</a></li><li><a href=#influxdb-token>InfluxDB Token</a></li></ul></li><li><a href=#home-assistant-configuration>Home Assistant configuration</a><ul><li><a href=#more-secrets>More secrets</a></li><li><a href=#restart>Restart</a></li></ul></li><li><a href=#manage-portainer-from-within-home-assistant>Manage Portainer from within Home Assistant</a></li><li><a href=#changelog>Changelog</a></li></ul></nav></div></aside></div></body></html>