<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-US lang=en-US><head><title itemprop=name>Adding Xiaomi Aqara Door and Window Sensor to HA via deCONZ (ConBee II) :: Sequr</title>
<meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=robots content="noodp, noydir"><meta name=googlebot content="noodp, noydir"><meta name=url content="https://sequr.be/blog/2020/11/adding-xiaomi-aqara-door-and-window-sensor-to-ha-via-deconz-conbee-ii/" itemprop=url><link rel=icon href=/favicon.ico><meta itemprop=name content="Adding Xiaomi Aqara Door and Window Sensor to HA via deCONZ (ConBee II)"><meta itemprop=description content="How-to on adding a Xiaomi Aqara Door and Window Sensor to Home Assistant over Zigbee using the ConBee II and deCONZ"><meta itemprop=datePublished content="2020-11-12T17:00:00+01:00"><meta itemprop=dateModified content="2021-01-26T22:00:00+01:00"><meta itemprop=wordCount content="1203"><meta itemprop=image content="https://sequr.be/blog/2020/11/adding-xiaomi-aqara-door-and-window-sensor-to-ha-via-deconz-conbee-ii/cover.jpg"><meta itemprop=keywords content="Home Automation,Home Assistant,DeCONZ,ConBee II,Aqara,Door Sensor,Window Sensor,Zigbee"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://sequr.be/blog/2020/11/adding-xiaomi-aqara-door-and-window-sensor-to-ha-via-deconz-conbee-ii/cover.jpg"><meta name=twitter:title content="Adding Xiaomi Aqara Door and Window Sensor to HA via deCONZ (ConBee II)"><meta name=twitter:description content="How-to on adding a Xiaomi Aqara Door and Window Sensor to Home Assistant over Zigbee using the ConBee II and deCONZ"><meta name=twitter:creator content="@DezeStijn"><meta name=twitter:label1 content="Written by"><meta name=twitter:data1 content="DezeStijn"><meta name=twitter:label2 content="Est. reading time"><meta name=twitter:data2 content="6 mins read"><meta property="og:url" content="https://sequr.be/blog/2020/11/adding-xiaomi-aqara-door-and-window-sensor-to-ha-via-deconz-conbee-ii/"><meta property="og:site_name" content="Sequr"><meta property="og:title" content="Adding Xiaomi Aqara Door and Window Sensor to HA via deCONZ (ConBee II)"><meta property="og:description" content="How-to on adding a Xiaomi Aqara Door and Window Sensor to Home Assistant over Zigbee using the ConBee II and deCONZ"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2020-11-12T17:00:00+01:00"><meta property="article:modified_time" content="2021-01-26T22:00:00+01:00"><meta property="article:tag" content="Home Automation"><meta property="article:tag" content="Home Assistant"><meta property="article:tag" content="DeCONZ"><meta property="article:tag" content="ConBee II"><meta property="article:tag" content="Aqara"><meta property="article:tag" content="Door Sensor"><meta property="og:image" content="https://sequr.be/blog/2020/11/adding-xiaomi-aqara-door-and-window-sensor-to-ha-via-deconz-conbee-ii/cover.jpg"><meta name=description content="How-to on adding a Xiaomi Aqara Door and Window Sensor to Home Assistant over Zigbee using the ConBee II and deCONZ"><meta property="og:updated_time" content="2021-01-26T22:00:00+01:00"><link rel=sitemap type=application/xml title=Sitemap href=https://sequr.be/sitemap.xml><link rel=alternate type=text/mf2+html href=https://sequr.be/><meta name=apple-mobile-web-app-title content="Adding Xiaomi Aqara Door and Window Sensor to HA via deCONZ (ConBee II)"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><link rel=webmention href=https://webmention.io/sequr.be/webmention><meta name=fediverse:creator content="@TerraGloba@mastodon-belgium.be"><link rel=stylesheet href=/css/bundle.min.308a714c50df5143bc08878001fede0511b3f9022c4c129848a3643270ab2f10.css integrity="sha256-MIpxTFDfUUO8CIeAAf7eBRGz+QIsTBKYSKNkMnCrLxA=" crossorigin=anonymous><script defer type=text/javascript src=/js/bundle.min.145453261a7755f5042a854c4213501d215a8fbe34c08d181c40f803f1315e74.js integrity="sha256-FFRTJhp3VfUEKoVMQhNQHSFaj740wI0YHED4A/ExXnQ=" crossorigin=anonymous></script></head><body class=dark-theme><div class=wrapper><aside class="sidebar h-card background-image"><div class="container sidebar-sticky"><div class=light-dark align=right><button class=btn-light-dark title="Toggle light/dark mode"><svg class="moon" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentcolor" d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278z"/></svg><svg class="sun" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentcolor" d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></svg></button></div><div class="sidebar-about hcard"><h1 class=brand><a href=https://sequr.be/><img src=/logo.png class="u-logo u-photo" alt="Sequr brand image">
</a><a href=https://sequr.be/ class="u-url p-org"><h1>Sequr</h1></a></h1><p class="lead p-note">Writeups and random stuff about infosec and life</p></div><nav><ul class=sidebar-nav><li class=heading><a href=/about/ title=About>About</a></li><li class=heading><a href=/blog/ title=Blog>Blog</a></li><li class=sub-heading>Recent</li><li class=bullet><a href=/blog/2025/12/controlling-smart-devices-via-nspanel-tasmota/ title="Controlling smart devices via NSPanel (Tasmota)" hreflang=en>Smart device control with NSPanel</a></li><li class=bullet><a href=/blog/2025/11/extracting-multipart-tgz-archive-from-google-takeout/ title="Extracting multipart tgz archive from Google Takeout" hreflang=en>Extract Google Takeout archive</a></li><li class=bullet><a href=/blog/2025/11/huntress-2025-cyber-awareness-month-ctf/ title="Huntress 2025 Cyber Awareness Month CTF" hreflang=en>Huntress 2025 CTF</a></li><li class=heading><a href=/shoppinglist/ title=Shopping>Shopping</a></li><li class=heading><a href=/privacy/ title=Privacy>Privacy</a></li></ul></nav><a target=_blank class=social title="Atom Feed" href=/atom.xml><svg width="1em" height="1.2em" viewBox="0 0 1280 1280"><g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)" fill="currentcolor"><path d="M2295 11929c-284-12-642-45-707-65-17-5-18-63-18-1039 0-569 4-1036 8-1039 5-3 74 6 153 19 510 86 1168 95 1789 25 1348-153 2602-677 3670-1531 385-308 820-744 1126-1129 842-1060 1362-2313 1514-3650 70-621 61-1279-25-1789-13-79-22-148-19-153 3-4 471-8 1039-8h1035l5 23c51 225 85 942 67 1419-23 605-77 1044-198 1617-294 14e2-927 2734-1823 3846-1043 1295-2364 2259-3909 2854-1158 447-2451 656-3707 6e2z"/><path d="M2255 7845c-269-25-620-81-667-106-17-9-18-55-18-899 0-706 3-890 13-890 6 0 66 18 132 41 130 44 288 79 467 105 154 21 577 30 749 15 1207-107 2267-823 2814-1902 166-327 268-637 330-1001 38-227 48-384 42-662-8-348-44-590-126-831-23-66-41-126-41-132 0-10 184-13 890-13 844 0 890 1 899 18 27 50 88 452 110 725 14 162 14 624 1 782-59 703-233 1323-545 1945-481 956-1313 1788-2270 2268-620 310-1239 483-1940 542-165 14-669 10-840-5z"/><path d="M2519 3815c-391-66-725-336-868-703-79-201-96-462-45-677 83-344 338-641 666-774 116-47 205-69 330-80 412-39 811 153 1040 5e2 193 292 240 648 128 981-135 403-492 699-914 757-1e2 14-241 12-337-4z"/></g></svg></a><a href=https://bsky.app/profile/sequr.be target=_blank class="u-url social" rel="external noopener me" title=Bluesky><svg width="1.2em" height="1.2em" viewBox="0 0 568 501"><path fill="currentcolor" d="M123.121 33.6637C188.241 82.5526 258.281 181.681 284 234.873c25.719-53.192 95.759-152.3204 160.879-201.2093C491.866-1.61183 568-28.9064 568 57.9464 568 75.2916 558.055 203.659 552.222 224.501c-20.275 72.453-94.155 90.933-159.875 79.748C507.222 323.8 536.444 388.56 473.333 453.32c-119.86 122.992-172.272-30.859-185.702-70.281C285.169 375.812 284.017 372.431 284 375.306 283.983 372.431 282.831 375.812 280.369 383.039c-13.43 39.422-65.842 193.273-185.7023 70.281C31.5556 388.56 60.7778 323.8 175.653 304.249 109.933 315.434 36.0535 296.954 15.7778 224.501 9.94525 203.659.0 75.2916.0 57.9464.0-28.9064 76.1345-1.61183 123.121 33.6637z"/></svg></a><a href=https://mastodon-belgium.be/@TerraGloba target=_blank class="u-url social" rel="external noopener me" title=Mastodon>
<svg width="1.2em" height="1.2em" viewBox="0 0 24 24"><path fill="currentcolor" d="M20.94 14c-.28 1.41-2.44 2.96-4.97 3.26-1.31.15-2.6.3-3.97.24-2.25-.11-4-.54-4-.54v.62c.32 2.22 2.22 2.35 4.03 2.42 1.82.05 3.44-.46 3.44-.46l.08 1.65s-1.28.68-3.55.81c-1.25.07-2.81-.03-4.62-.5-3.92-1.05-4.6-5.24-4.7-9.5l-.01-3.43c0-4.34 2.83-5.61 2.83-5.61C6.95 2.3 9.41 2 11.97 2h.06c2.56.0 5.02.3 6.47.96.0.0 2.83 1.27 2.83 5.61.0.0.04 3.21-.39 5.43M18 8.91c0-1.08-.3-1.91-.85-2.56-.56-.63-1.3-.96-2.23-.96-1.06.0-1.87.41-2.42 1.23l-.5.88-.5-.88c-.56-.82-1.36-1.23-2.43-1.23-.92.0-1.66.33-2.23.96C6.29 7 6 7.83 6 8.91v5.26h2.1V9.06c0-1.06.45-1.62 1.36-1.62 1 0 1.5.65 1.5 1.93v2.79h2.07V9.37c0-1.28.5-1.93 1.51-1.93.9.0 1.35.56 1.35 1.62v5.11H18V8.91z"/></svg></a><a href=https://github.com/TheGroundZero target=_blank class="u-url social" rel="external noopener me" title=Github><svg width="1.2em" height="1.2em" viewBox="-2 -2 24 24"><path fill="currentcolor" d="M18.88 1.099C18.147.366 17.265.0 16.233.0H3.746C2.714.0 1.832.366 1.099 1.099.366 1.832.0 2.714.0 3.746v12.487c0 1.032.366 1.914 1.099 2.647.733.733 1.615 1.099 2.647 1.099H6.66c.19.0.333-.007.429-.02a.504.504.0 00.286-.169c.095-.1.143-.245.143-.435l-.007-.885c-.004-.564-.006-1.01-.006-1.34l-.3.052c-.19.035-.43.05-.721.046a5.555 5.555.0 01-.904-.091 2.026 2.026.0 01-.872-.39 1.651 1.651.0 01-.572-.8l-.13-.3a3.25 3.25.0 00-.41-.663c-.186-.243-.375-.407-.566-.494l-.09-.065a.956.956.0 01-.17-.156.723.723.0 01-.117-.182c-.026-.061-.004-.111.065-.15.07-.04.195-.059.378-.059l.26.04c.173.034.388.138.643.311a2.1 2.1.0 01.631.677c.2.355.44.626.722.813.282.186.566.28.852.28.286.0.533-.022.742-.065a2.59 2.59.0 00.585-.196c.078-.58.29-1.028.637-1.34a8.907 8.907.0 01-1.333-.234 5.314 5.314.0 01-1.223-.507 3.5 3.5.0 01-1.047-.872c-.277-.347-.505-.802-.683-1.365-.177-.564-.266-1.215-.266-1.952.0-1.049.342-1.942 1.027-2.68-.32-.788-.29-1.673.091-2.652.252-.079.625-.02 1.119.175.494.195.856.362 1.086.5.23.14.414.257.553.352a9.233 9.233.0 012.497-.338c.859.0 1.691.113 2.498.338l.494-.312a6.997 6.997.0 011.197-.572c.46-.174.81-.221 1.054-.143.39.98.424 1.864.103 2.653.685.737 1.028 1.63 1.028 2.68.0.737-.089 1.39-.267 1.957-.177.568-.407 1.023-.689 1.366a3.65 3.65.0 01-1.053.865c-.42.234-.828.403-1.223.507a8.9 8.9.0 01-1.333.235c.45.39.676 1.005.676 1.846v3.11c0 .147.021.266.065.357a.36.36.0 00.208.189c.096.034.18.056.254.064.074.01.18.013.318.013h2.914c1.032.0 1.914-.366 2.647-1.099.732-.732 1.099-1.615 1.099-2.647V3.746c0-1.032-.367-1.914-1.1-2.647z"/></svg></a><a href=https://twitter.com/DezeStijn target=_blank class="u-url social" rel="external noopener me" title=Twitter><svg width="1.2em" height="1.2em" viewBox="0 0 16 16"><path fill="currentcolor" d="M5.032 14.286c6.037.0 9.34-4.837 9.34-9.032.0-.137.0-.274-.01-.41A6.56 6.56.0 0016 3.2c-.6.256-1.235.425-1.885.5a3.207 3.207.0 001.443-1.757c-.645.37-1.35.63-2.085.77a3.322 3.322.0 00-1.862-.958 3.384 3.384.0 00-2.082.334 3.223 3.223.0 00-1.442 1.49 3.08 3.08.0 00-.208 2.03 9.57 9.57.0 01-3.747-.963A9.269 9.269.0 011.114 2.292a3.086 3.086.0 00-.36 2.314c.189.787.68 1.475 1.376 1.924A3.344 3.344.0 01.64 6.132v.04c0 .734.263 1.444.743 2.01a3.3 3.3.0 001.89 1.102c-.483.128-.99.146-1.482.055a3.19 3.19.0 001.168 1.577 3.36 3.36.0 001.9.627A6.732 6.732.0 010 12.86a9.527 9.527.0 005.032 1.423"/></svg></a><a href=https://ko-fi.com/s4squatch target=_blank class="u-url social" rel="external noopener" title=Kofi><svg width="1.2em" height="1.2em" viewBox="0 0 24 24"><path fill="currentcolor" d="M23.881 8.948c-.773-4.085-4.859-4.593-4.859-4.593H.723c-.604.0-.679.798-.679.798s-.082 7.324-.022 11.822c.164 2.424 2.586 2.672 2.586 2.672s8.267-.023 11.966-.049c2.438-.426 2.683-2.566 2.658-3.734 4.352.24 7.422-2.831 6.649-6.916zm-11.062 3.511c-1.246 1.453-4.011 3.976-4.011 3.976s-.121.119-.31.023c-.076-.057-.108-.09-.108-.09-.443-.441-3.368-3.049-4.034-3.954-.709-.965-1.041-2.7-.091-3.71.951-1.01 3.005-1.086 4.363.407.0.0 1.565-1.782 3.468-.963 1.904.82 1.832 3.011.723 4.311zm6.173.478c-.928.116-1.682.028-1.682.028V7.284h1.77s1.971.551 1.971 2.638c0 1.913-.985 2.667-2.059 3.015z"/></svg></a><p class=footnote>&copy; 2019
• <a class="p-name u-url" href=https://sequr.be>Sequr</a>
• <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank rel="external noopener">CC BY-NC-SA 4.0</a></p><a href=https://sequr.be/en hreflang=en-US title=English class=u-translation-of rel=alternate><span class="flag fi fi-gb"></span>
</a><a href=https://sequr.be/nl hreflang=nl-BE title=Nederlands class=u-translation-of rel=alternate><span class="flag fi fi-nl"></span></a></div></aside><section class="content container"><article class="post h-entry"><header class=info><h1 class=post-title><a href=https://sequr.be/blog/2020/11/adding-xiaomi-aqara-door-and-window-sensor-to-ha-via-deconz-conbee-ii/ class="p-name u-url" rel=bookmark>Adding Xiaomi Aqara Door and Window Sensor to HA via deCONZ (ConBee II)</a></h1><div class=headline><div><span class="h-card p-author">DezeStijn</span><span class=whitespace> • </span><time datetime=2020-11-12T17:00:00+0100 class="post-date dt-published">Nov 12, 2020</time><span class=whitespace> </span><time datetime=2021-01-26T22:00:00+0100 class="post-date dt-updated">(Jan 26, 2021)
</time><span class=whitespace>• </span><span class=reading-time><data class=p-duration value=PT6M>6 mins read</data></span></div><ul class=tags><li class="tag-Home Automation"><a class=p-category href=https://sequr.be/categories/home-automation>Home Automation</a></li></ul></div></header><main class=e-content><p>Xiaomi Aqara devices is an extremely cheap and versatile series of smart home devices.<br>Whilst cheap, they still perform very well and are easy to integrate in Home Assistant.</p><p>In contrast to the devices by Shelly, they communicate over Zigbee instead of WiFi.
Because of this, the devices require a Zigbee hub that acts as an intermediary between the devices and your smartphone, home automation system, etc.</p><p>That&rsquo;s where the deCONZ Zigbee gateway comes in.<br>To let the deCONZ software communicate over Zigbee, you&rsquo;ll need a ConBee II (a USB stick) or a RaspBee Shield for the Raspberry Pi, both by Dresden Elektronik.<br>Since I&rsquo;m running Home Assistant on a server rather than on an RPi, I bought the ConBee II.</p><p>Home Assistant also provides a deCONZ integration, allowing for a very smooth integration of Zigbee devices in HA.</p><p>In this tutorial, I&rsquo;ll explain how to install an <a href=https://s.click.aliexpress.com/e/_Amu3Q9 title="Aqara Door and Window Sensor" rel=external target=_blank>Aqara Door and Window Sensor</a>(<a href=https://aliexpress.com/item/4000094329575.html title="Aqara Door and Window Sensor (non-affiliate)" rel=external target=_blank>NA</a>).
This method works for other Aqara Zigbee devices, like the <a href=https://s.click.aliexpress.com/e/_AUhwQH title="Aqara Motion Sensor" rel=external target=_blank>Aqara Motion Sensor</a>(<a href=https://www.aliexpress.com/item/33014918694.html title="Aqara Motion Sensor (non-affiliate)" rel=external target=_blank>NA</a>) or <a href=https://s.click.aliexpress.com/e/_AUeqel title="Aqara Vibration Sensor" rel=external target=_blank>Aqara Vibration Sensor</a>(<a href=https://www.aliexpress.com/item/1005001585282780.html title="Aqara Vibration Sensor (non-affiliate)" rel=external target=_blank>NA</a>) , as well.<br>In fact, this tutorial will work for just about any sensor/switch/&mldr; that works over Zigbee.</p><p>The Aqara Door and Window Sensor is a tiny battery-power door/window sensor.
It also has a temperature sensor inside of it.</p><figure class=center><img src=aqara-doorwindow.png alt="Aqara Door and Window Sensor"><figcaption class=center>Aqara Door and Window Sensor</figcaption></figure><p>Yes, it&rsquo;s tiny!</p><h2 id=installing-the-conbee-ii-gateway>Installing the ConBee II gateway</h2><h3 id=get-a-dresden-elektronik-conbee-ii-usb-gateway>Get a Dresden Elektronik ConBee II USB gateway</h3><p>First of all, you&rsquo;ll need to get a Dresden Elektronik ConBee II USB gateway.<br>You can buy this at Amazon [<a href=https://smile.amazon.com/dresden-elektronik-ConBee-Universal-Gateway/dp/B07PZ7ZHG5 title="dresden elektronik ConBee II The Universal Zigbee USB Gateway" rel=external target=_blank>COM</a>][<a href=https://smile.amazon.de/dp/B07PZ7ZHG5/ title="ConBee II das universelle Zigbee USB-Gateway" rel=external target=_blank>DE</a>].
Make sure you use <code>smile.amazon.{com,de}</code> to donate to charity.</p><figure class=center><img src=conbee_ii.png alt="ConBee II USB stick"><figcaption class=center>ConBee II USB stick</figcaption></figure><h3 id=add-conbee-ii-to-your-system>Add ConBee II to your system</h3><p>Once you got the USB-stick, plug it in your system.</p><p><strong>Note:</strong> It appears that the WiFi chip on the Raspberry Pi (probably due to its proximity) may interfere with the signal of the Zigbee stick (since both run on 2.4GHz).
You may want to create some distance between the two by connecting to ConBee II to a <a href=https://s.click.aliexpress.com/e/_AKmLeN title="Ugreen USB Extension Cable USB 3.0 Cable" rel=external target=_blank>USB extension cord</a>(<a href=https://www.aliexpress.com/item/4000083972646.html title="Ugreen USB Extension Cable USB 3.0 Cable (non-affiliate)" rel=external target=_blank>NA</a>).</p><p>If you&rsquo;re &ndash; like me &ndash; running Home Assistant in a Virtual Machine (VM), you&rsquo;ll need to assign the device to your VM.<br>In Proxmox, you can do this by opening the Hardware tab of your VM and adding a new USB Device.<br>I&rsquo;m pretty sure you&rsquo;ll want to <strong>un</strong>check USB3 here.</p><p>Use USB Vendor/Device ID so that you can plug the USB stick in any USB port on your system without needing to reconfigure your VM.<br>You only need to bind to a USB Port if you&rsquo;re for some reason plugging in two ConBee II&rsquo;s.</p><figure class=center><img src=proxmox-conbee.png alt="Adding ConBee II to Proxmox VM"><figcaption class=center>Adding ConBee II to Proxmox VM</figcaption></figure><p>Next, reboot your Home Assistant VM and verify it can reach the ConBee II.<br>Open the Supervisor menu, go to the system tab, press the three dots under Host System and open the Hardware list.</p><figure class=center><img src=homeassistant-hardware.png alt="Home Assistant - Open hardware menu"><figcaption class=center>Home Assistant - Open hardware menu</figcaption></figure><figure class=center><img src=homeassistant-hardware-conbee.png alt="Home Assistant - Open hardware list"><figcaption class=center>Home Assistant - Open hardware list</figcaption></figure><p>If you cannot find the ConBee II in this list, you may need to remove and plug the USB stick back in, check your assignment in Proxmox and fully reboot HA (not just reload).</p><p>Copy the hardware address (e.g., <code>/dev/serial/by-id/usb-dresden_elektronik_ingenieurtechnik_GmbH_ConBee_II_xxx</code>).</p><h3 id=install-deconz-add-on>Install deCONZ add-on</h3><ol><li>Open the Supervisor menu and go to the Add-on Store tab</li><li>Install the deCONZ add-on</li><li>Open the deCONZ add-on menu and go to the Configuration tab<br>Paste the hardware address under the device-key<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>device</span>: &gt;-<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  /dev/serial/by-id/usb-dresden_elektronik_ingenieurtechnik_GmbH_ConBee_II_xxx</span>  
</span></span></code></pre></div></li><li>Under the info tab, check &ldquo;Watchdog&rdquo; and &ldquo;Auto update&rdquo;, if you want</li><li>Start the add-on and check the logs for errors</li></ol><figure class=center><img src=homeassistant-deconz-addon.png alt="Install deCONZ add-on"><figcaption class=center>Install deCONZ add-on</figcaption></figure><h2 id=adding-the-aqara-door-and-window-sensor>Adding the Aqara Door and Window Sensor</h2><h3 id=launch-deconz--phoscon>Launch deCONZ / Phoscon</h3><p>Either check the &ldquo;Show in sidebar&rdquo; and open the deCONZ app from there, or click &ldquo;Open web UI&rdquo; in the deCONZ add-on menu.</p><p>I chose to work with the <a href=https://phoscon.de/en/conbee/software#phoscon-app title="Phoscon App docs" rel=external target=_blank>Phoscon app</a>.</p><figure class=center><img src=homeassistant-deconz-app.png alt="deCONZ app selection"><figcaption class=center>deCONZ app selection</figcaption></figure><p>On first launch, you&rsquo;ll need to create an account.
Be sure to remember these credentials (add them to your password vault) as you&rsquo;ll need this each time you open the app.<br>You&rsquo;ll most likely also need to do an initial configuration of your ConBee II gateway and update it&rsquo;s firmware.</p><p>Proceed without lights.<br>Skip the creation of groups.</p><h3 id=add-the-sensor>Add the sensor</h3><p>Make sure you already unboxed the sensor by now.</p><ol><li>Open the sidebar menu and click on Sensors under the Devices section.</li><li>Click &ldquo;Add new sensor&rdquo;</li><li>Pick &ldquo;Other&rdquo; as Vendor</li><li>The search for new sensors is now active for 3 minutes</li><li>Pick up your Aqara Door and Window Sensor and shortly press the small button on the sensor</li><li>The sensor should be picked up in about 10 seconds. If not, move closer to the ConBee II and press the button again</li><li>Give the sensor a name (e.g. <code>DW Front Door</code>)</li></ol><h3 id=rename-in-home-assistant>Rename in Home Assistant</h3><p>The Aqara sensor is now added to Home Assistant.<br>The device will also have 2 related entities: 1 binary sensor for the door/window state (on = open, off = closed) and a sensor for the battery percentage.</p><p>This step is optional, but I prefer to rename the device so that the entity_id&rsquo;s are a bit more sensible.</p><ol><li>Go to the Devices list under the Configuration menu</li><li>Search for <code>deCONZ</code></li><li>Aside from the Phoscon-GW, the daylight sensor (built-in in Phoscon) and (in my case) an unnamed device, you should also find your Door and Window Sensor<br>In my case, it&rsquo;s identified as a <code>lumi.sensor_magnet.aq2</code> by <code>LUMI</code></li><li>Open the device menu</li><li>Click the cogwheel at the top right of your window</li><li>Give the device a new name and set the location</li><li>Say Yes when Home Assistant asks you if you want to also rename the entities<br>If this fails, you can manually rename the entities from the device menu as well.</li></ol><figure class=center><img src=homeassistant-aqara-device.png alt="Device menu - Aqara sensor"><figcaption class=center>Device menu - Aqara sensor</figcaption></figure><h2 id=create-automations>Create automations</h2><p>Now you can create automations based on the state of the sensor.<br>Want to turn on the hallway lighs when the door opens? No problem!<br>Want an alert on your phone when the door opens while nobody&rsquo;s home? No problem!
Want to &mldr; ? No problem!</p><p>Since I&rsquo;m using Node-RED for all my automations, I opened the Node-RED application and set up my automation.</p><p>This automation triggers when the state of the door sensor changes.<br>If it opened, the light turns on. If nobody is home, an alert is sent to my phone with a picture from the front door camera and a link to the security tab of my Lovelace interface.<br>If it&rsquo;s closed, the light turns off after 2 minutes. You&rsquo;ll perhaps want to have an override here for when the hallway light switch is on.</p><p>You can automate your lights using e.g. a <a href=/blog/2020/07/home-automation-intro-into-shelly/ title="Intro into Shelly">Shelly</a>.
This device can be added to Home Assistant using the new Shelly integration, via ShellyForHass or via <a href=/blog/2020/10/home-automation-getting-started-with-mqtt-and-home-assistant-and-shelly/ title="Getting started with MQTT and Home Assistant (and Shelly)">MQTT</a>.</p><figure class=center><img src=homeassistant-nodered-aqara-example.png alt="Node-RED example flow for front door sensor and hallway lights"><figcaption class=center>Node-RED example flow for front door sensor and hallway lights</figcaption></figure><p>The code for this flow can be found below:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-json data-lang=json><span style=display:flex><span>[{<span style=color:#f92672>&#34;id&#34;</span>:<span style=color:#e6db74>&#34;9ec7d5da.d232f8&#34;</span>,<span style=color:#f92672>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;tab&#34;</span>,<span style=color:#f92672>&#34;label&#34;</span>:<span style=color:#e6db74>&#34;Example flow sequr.be&#34;</span>,<span style=color:#f92672>&#34;disabled&#34;</span>:<span style=color:#66d9ef>false</span>,<span style=color:#f92672>&#34;info&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>},{<span style=color:#f92672>&#34;id&#34;</span>:<span style=color:#e6db74>&#34;b440de1.8abb82&#34;</span>,<span style=color:#f92672>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;comment&#34;</span>,<span style=color:#f92672>&#34;z&#34;</span>:<span style=color:#e6db74>&#34;9ec7d5da.d232f8&#34;</span>,<span style=color:#f92672>&#34;name&#34;</span>:<span style=color:#e6db74>&#34;DW sensor front door&#34;</span>,<span style=color:#f92672>&#34;info&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>,<span style=color:#f92672>&#34;x&#34;</span>:<span style=color:#ae81ff>140</span>,<span style=color:#f92672>&#34;y&#34;</span>:<span style=color:#ae81ff>60</span>,<span style=color:#f92672>&#34;wires&#34;</span>:[]},{<span style=color:#f92672>&#34;id&#34;</span>:<span style=color:#e6db74>&#34;5c6334e3.285aec&#34;</span>,<span style=color:#f92672>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;server-state-changed&#34;</span>,<span style=color:#f92672>&#34;z&#34;</span>:<span style=color:#e6db74>&#34;9ec7d5da.d232f8&#34;</span>,<span style=color:#f92672>&#34;name&#34;</span>:<span style=color:#e6db74>&#34;Door open?&#34;</span>,<span style=color:#f92672>&#34;server&#34;</span>:<span style=color:#e6db74>&#34;2ce15169.23b9de&#34;</span>,<span style=color:#f92672>&#34;version&#34;</span>:<span style=color:#ae81ff>1</span>,<span style=color:#f92672>&#34;exposeToHomeAssistant&#34;</span>:<span style=color:#66d9ef>false</span>,<span style=color:#f92672>&#34;haConfig&#34;</span>:[{<span style=color:#f92672>&#34;property&#34;</span>:<span style=color:#e6db74>&#34;name&#34;</span>,<span style=color:#f92672>&#34;value&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>},{<span style=color:#f92672>&#34;property&#34;</span>:<span style=color:#e6db74>&#34;icon&#34;</span>,<span style=color:#f92672>&#34;value&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>}],<span style=color:#f92672>&#34;entityidfilter&#34;</span>:<span style=color:#e6db74>&#34;binary_sensor.dw_frontdoor&#34;</span>,<span style=color:#f92672>&#34;entityidfiltertype&#34;</span>:<span style=color:#e6db74>&#34;exact&#34;</span>,<span style=color:#f92672>&#34;outputinitially&#34;</span>:<span style=color:#66d9ef>false</span>,<span style=color:#f92672>&#34;state_type&#34;</span>:<span style=color:#e6db74>&#34;habool&#34;</span>,<span style=color:#f92672>&#34;haltifstate&#34;</span>:<span style=color:#e6db74>&#34;true&#34;</span>,<span style=color:#f92672>&#34;halt_if_type&#34;</span>:<span style=color:#e6db74>&#34;bool&#34;</span>,<span style=color:#f92672>&#34;halt_if_compare&#34;</span>:<span style=color:#e6db74>&#34;is&#34;</span>,<span style=color:#f92672>&#34;outputs&#34;</span>:<span style=color:#ae81ff>2</span>,<span style=color:#f92672>&#34;output_only_on_state_change&#34;</span>:<span style=color:#66d9ef>true</span>,<span style=color:#f92672>&#34;x&#34;</span>:<span style=color:#ae81ff>110</span>,<span style=color:#f92672>&#34;y&#34;</span>:<span style=color:#ae81ff>180</span>,<span style=color:#f92672>&#34;wires&#34;</span>:[[<span style=color:#e6db74>&#34;e7dcb7d6.bde698&#34;</span>,<span style=color:#e6db74>&#34;a07a0cb.75cad7&#34;</span>],[<span style=color:#e6db74>&#34;b4b17f00.c9b63&#34;</span>]]},{<span style=color:#f92672>&#34;id&#34;</span>:<span style=color:#e6db74>&#34;e7dcb7d6.bde698&#34;</span>,<span style=color:#f92672>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;api-call-service&#34;</span>,<span style=color:#f92672>&#34;z&#34;</span>:<span style=color:#e6db74>&#34;9ec7d5da.d232f8&#34;</span>,<span style=color:#f92672>&#34;name&#34;</span>:<span style=color:#e6db74>&#34;Hallway lights on&#34;</span>,<span style=color:#f92672>&#34;server&#34;</span>:<span style=color:#e6db74>&#34;2ce15169.23b9de&#34;</span>,<span style=color:#f92672>&#34;version&#34;</span>:<span style=color:#ae81ff>1</span>,<span style=color:#f92672>&#34;debugenabled&#34;</span>:<span style=color:#66d9ef>false</span>,<span style=color:#f92672>&#34;service_domain&#34;</span>:<span style=color:#e6db74>&#34;light&#34;</span>,<span style=color:#f92672>&#34;service&#34;</span>:<span style=color:#e6db74>&#34;turn_on&#34;</span>,<span style=color:#f92672>&#34;entityId&#34;</span>:<span style=color:#e6db74>&#34;light.hallway_lights&#34;</span>,<span style=color:#f92672>&#34;data&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>,<span style=color:#f92672>&#34;dataType&#34;</span>:<span style=color:#e6db74>&#34;json&#34;</span>,<span style=color:#f92672>&#34;mergecontext&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>,<span style=color:#f92672>&#34;output_location&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>,<span style=color:#f92672>&#34;output_location_type&#34;</span>:<span style=color:#e6db74>&#34;none&#34;</span>,<span style=color:#f92672>&#34;mustacheAltTags&#34;</span>:<span style=color:#66d9ef>false</span>,<span style=color:#f92672>&#34;x&#34;</span>:<span style=color:#ae81ff>310</span>,<span style=color:#f92672>&#34;y&#34;</span>:<span style=color:#ae81ff>160</span>,<span style=color:#f92672>&#34;wires&#34;</span>:[[]]},{<span style=color:#f92672>&#34;id&#34;</span>:<span style=color:#e6db74>&#34;b4b17f00.c9b63&#34;</span>,<span style=color:#f92672>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;delay&#34;</span>,<span style=color:#f92672>&#34;z&#34;</span>:<span style=color:#e6db74>&#34;9ec7d5da.d232f8&#34;</span>,<span style=color:#f92672>&#34;name&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>,<span style=color:#f92672>&#34;pauseType&#34;</span>:<span style=color:#e6db74>&#34;delay&#34;</span>,<span style=color:#f92672>&#34;timeout&#34;</span>:<span style=color:#e6db74>&#34;2&#34;</span>,<span style=color:#f92672>&#34;timeoutUnits&#34;</span>:<span style=color:#e6db74>&#34;minutes&#34;</span>,<span style=color:#f92672>&#34;rate&#34;</span>:<span style=color:#e6db74>&#34;1&#34;</span>,<span style=color:#f92672>&#34;nbRateUnits&#34;</span>:<span style=color:#e6db74>&#34;1&#34;</span>,<span style=color:#f92672>&#34;rateUnits&#34;</span>:<span style=color:#e6db74>&#34;second&#34;</span>,<span style=color:#f92672>&#34;randomFirst&#34;</span>:<span style=color:#e6db74>&#34;1&#34;</span>,<span style=color:#f92672>&#34;randomLast&#34;</span>:<span style=color:#e6db74>&#34;5&#34;</span>,<span style=color:#f92672>&#34;randomUnits&#34;</span>:<span style=color:#e6db74>&#34;seconds&#34;</span>,<span style=color:#f92672>&#34;drop&#34;</span>:<span style=color:#66d9ef>false</span>,<span style=color:#f92672>&#34;x&#34;</span>:<span style=color:#ae81ff>280</span>,<span style=color:#f92672>&#34;y&#34;</span>:<span style=color:#ae81ff>220</span>,<span style=color:#f92672>&#34;wires&#34;</span>:[[<span style=color:#e6db74>&#34;ae62427e.0af6b8&#34;</span>]]},{<span style=color:#f92672>&#34;id&#34;</span>:<span style=color:#e6db74>&#34;ae62427e.0af6b8&#34;</span>,<span style=color:#f92672>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;api-call-service&#34;</span>,<span style=color:#f92672>&#34;z&#34;</span>:<span style=color:#e6db74>&#34;9ec7d5da.d232f8&#34;</span>,<span style=color:#f92672>&#34;name&#34;</span>:<span style=color:#e6db74>&#34;Hallway lights off&#34;</span>,<span style=color:#f92672>&#34;server&#34;</span>:<span style=color:#e6db74>&#34;2ce15169.23b9de&#34;</span>,<span style=color:#f92672>&#34;version&#34;</span>:<span style=color:#ae81ff>1</span>,<span style=color:#f92672>&#34;debugenabled&#34;</span>:<span style=color:#66d9ef>false</span>,<span style=color:#f92672>&#34;service_domain&#34;</span>:<span style=color:#e6db74>&#34;light&#34;</span>,<span style=color:#f92672>&#34;service&#34;</span>:<span style=color:#e6db74>&#34;turn_off&#34;</span>,<span style=color:#f92672>&#34;entityId&#34;</span>:<span style=color:#e6db74>&#34;light.hallway_lights&#34;</span>,<span style=color:#f92672>&#34;data&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>,<span style=color:#f92672>&#34;dataType&#34;</span>:<span style=color:#e6db74>&#34;json&#34;</span>,<span style=color:#f92672>&#34;mergecontext&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>,<span style=color:#f92672>&#34;output_location&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>,<span style=color:#f92672>&#34;output_location_type&#34;</span>:<span style=color:#e6db74>&#34;none&#34;</span>,<span style=color:#f92672>&#34;mustacheAltTags&#34;</span>:<span style=color:#66d9ef>false</span>,<span style=color:#f92672>&#34;x&#34;</span>:<span style=color:#ae81ff>470</span>,<span style=color:#f92672>&#34;y&#34;</span>:<span style=color:#ae81ff>220</span>,<span style=color:#f92672>&#34;wires&#34;</span>:[[]]},{<span style=color:#f92672>&#34;id&#34;</span>:<span style=color:#e6db74>&#34;a07a0cb.75cad7&#34;</span>,<span style=color:#f92672>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;ha-get-entities&#34;</span>,<span style=color:#f92672>&#34;z&#34;</span>:<span style=color:#e6db74>&#34;9ec7d5da.d232f8&#34;</span>,<span style=color:#f92672>&#34;server&#34;</span>:<span style=color:#e6db74>&#34;2ce15169.23b9de&#34;</span>,<span style=color:#f92672>&#34;name&#34;</span>:<span style=color:#e6db74>&#34;Anyone home?&#34;</span>,<span style=color:#f92672>&#34;rules&#34;</span>:[{<span style=color:#f92672>&#34;property&#34;</span>:<span style=color:#e6db74>&#34;state&#34;</span>,<span style=color:#f92672>&#34;logic&#34;</span>:<span style=color:#e6db74>&#34;is&#34;</span>,<span style=color:#f92672>&#34;value&#34;</span>:<span style=color:#e6db74>&#34;home&#34;</span>,<span style=color:#f92672>&#34;valueType&#34;</span>:<span style=color:#e6db74>&#34;str&#34;</span>},{<span style=color:#f92672>&#34;property&#34;</span>:<span style=color:#e6db74>&#34;entity_id&#34;</span>,<span style=color:#f92672>&#34;logic&#34;</span>:<span style=color:#e6db74>&#34;starts_with&#34;</span>,<span style=color:#f92672>&#34;value&#34;</span>:<span style=color:#e6db74>&#34;person.&#34;</span>,<span style=color:#f92672>&#34;valueType&#34;</span>:<span style=color:#e6db74>&#34;str&#34;</span>}],<span style=color:#f92672>&#34;output_type&#34;</span>:<span style=color:#e6db74>&#34;count&#34;</span>,<span style=color:#f92672>&#34;output_empty_results&#34;</span>:<span style=color:#66d9ef>true</span>,<span style=color:#f92672>&#34;output_location_type&#34;</span>:<span style=color:#e6db74>&#34;msg&#34;</span>,<span style=color:#f92672>&#34;output_location&#34;</span>:<span style=color:#e6db74>&#34;payload&#34;</span>,<span style=color:#f92672>&#34;output_results_count&#34;</span>:<span style=color:#ae81ff>1</span>,<span style=color:#f92672>&#34;x&#34;</span>:<span style=color:#ae81ff>300</span>,<span style=color:#f92672>&#34;y&#34;</span>:<span style=color:#ae81ff>120</span>,<span style=color:#f92672>&#34;wires&#34;</span>:[[<span style=color:#e6db74>&#34;d9c12867.acebe8&#34;</span>]]},{<span style=color:#f92672>&#34;id&#34;</span>:<span style=color:#e6db74>&#34;d9c12867.acebe8&#34;</span>,<span style=color:#f92672>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;switch&#34;</span>,<span style=color:#f92672>&#34;z&#34;</span>:<span style=color:#e6db74>&#34;9ec7d5da.d232f8&#34;</span>,<span style=color:#f92672>&#34;name&#34;</span>:<span style=color:#e6db74>&#34;0 ppl home&#34;</span>,<span style=color:#f92672>&#34;property&#34;</span>:<span style=color:#e6db74>&#34;payload&#34;</span>,<span style=color:#f92672>&#34;propertyType&#34;</span>:<span style=color:#e6db74>&#34;msg&#34;</span>,<span style=color:#f92672>&#34;rules&#34;</span>:[{<span style=color:#f92672>&#34;t&#34;</span>:<span style=color:#e6db74>&#34;eq&#34;</span>,<span style=color:#f92672>&#34;v&#34;</span>:<span style=color:#e6db74>&#34;0&#34;</span>,<span style=color:#f92672>&#34;vt&#34;</span>:<span style=color:#e6db74>&#34;num&#34;</span>}],<span style=color:#f92672>&#34;checkall&#34;</span>:<span style=color:#e6db74>&#34;true&#34;</span>,<span style=color:#f92672>&#34;repair&#34;</span>:<span style=color:#66d9ef>false</span>,<span style=color:#f92672>&#34;outputs&#34;</span>:<span style=color:#ae81ff>1</span>,<span style=color:#f92672>&#34;x&#34;</span>:<span style=color:#ae81ff>490</span>,<span style=color:#f92672>&#34;y&#34;</span>:<span style=color:#ae81ff>120</span>,<span style=color:#f92672>&#34;wires&#34;</span>:[[<span style=color:#e6db74>&#34;98d5bdb7.611b2&#34;</span>]]},{<span style=color:#f92672>&#34;id&#34;</span>:<span style=color:#e6db74>&#34;b20702ac.a4503&#34;</span>,<span style=color:#f92672>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;api-call-service&#34;</span>,<span style=color:#f92672>&#34;z&#34;</span>:<span style=color:#e6db74>&#34;9ec7d5da.d232f8&#34;</span>,<span style=color:#f92672>&#34;name&#34;</span>:<span style=color:#e6db74>&#34;Send notification&#34;</span>,<span style=color:#f92672>&#34;server&#34;</span>:<span style=color:#e6db74>&#34;2ce15169.23b9de&#34;</span>,<span style=color:#f92672>&#34;version&#34;</span>:<span style=color:#ae81ff>1</span>,<span style=color:#f92672>&#34;debugenabled&#34;</span>:<span style=color:#66d9ef>false</span>,<span style=color:#f92672>&#34;service_domain&#34;</span>:<span style=color:#e6db74>&#34;notify&#34;</span>,<span style=color:#f92672>&#34;service&#34;</span>:<span style=color:#e6db74>&#34;mobile_app_me&#34;</span>,<span style=color:#f92672>&#34;entityId&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>,<span style=color:#f92672>&#34;data&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>,<span style=color:#f92672>&#34;dataType&#34;</span>:<span style=color:#e6db74>&#34;json&#34;</span>,<span style=color:#f92672>&#34;mergecontext&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>,<span style=color:#f92672>&#34;output_location&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>,<span style=color:#f92672>&#34;output_location_type&#34;</span>:<span style=color:#e6db74>&#34;none&#34;</span>,<span style=color:#f92672>&#34;mustacheAltTags&#34;</span>:<span style=color:#66d9ef>false</span>,<span style=color:#f92672>&#34;x&#34;</span>:<span style=color:#ae81ff>1000</span>,<span style=color:#f92672>&#34;y&#34;</span>:<span style=color:#ae81ff>120</span>,<span style=color:#f92672>&#34;wires&#34;</span>:[[]]},{<span style=color:#f92672>&#34;id&#34;</span>:<span style=color:#e6db74>&#34;98d5bdb7.611b2&#34;</span>,<span style=color:#f92672>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;function&#34;</span>,<span style=color:#f92672>&#34;z&#34;</span>:<span style=color:#e6db74>&#34;9ec7d5da.d232f8&#34;</span>,<span style=color:#f92672>&#34;name&#34;</span>:<span style=color:#e6db74>&#34;Notification data with camera image&#34;</span>,<span style=color:#f92672>&#34;func&#34;</span>:<span style=color:#e6db74>&#34;msg.payload =\n{\n    \&#34;data\&#34;: {\n        \&#34;title\&#34;: \&#34;Someone opened front door\&#34;,\n        \&#34;message\&#34;: \&#34;Somone opened front door, but nobody is home\&#34;,\n        \&#34;data\&#34;: {\n            \&#34;image\&#34;: \&#34;https://example.org/api/camera_proxy/camera.frontdoor?token=verylongstring\&#34;,\n            \&#34;clickAction\&#34;: \&#34;/lovelace/security\&#34;\n        }\n    }\n}\nreturn msg;\n&#34;</span>,<span style=color:#f92672>&#34;outputs&#34;</span>:<span style=color:#ae81ff>1</span>,<span style=color:#f92672>&#34;noerr&#34;</span>:<span style=color:#ae81ff>0</span>,<span style=color:#f92672>&#34;initialize&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>,<span style=color:#f92672>&#34;finalize&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>,<span style=color:#f92672>&#34;x&#34;</span>:<span style=color:#ae81ff>740</span>,<span style=color:#f92672>&#34;y&#34;</span>:<span style=color:#ae81ff>120</span>,<span style=color:#f92672>&#34;wires&#34;</span>:[[<span style=color:#e6db74>&#34;b20702ac.a4503&#34;</span>]]},{<span style=color:#f92672>&#34;id&#34;</span>:<span style=color:#e6db74>&#34;2ce15169.23b9de&#34;</span>,<span style=color:#f92672>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;server&#34;</span>,<span style=color:#f92672>&#34;name&#34;</span>:<span style=color:#e6db74>&#34;Home Assistant&#34;</span>,<span style=color:#f92672>&#34;legacy&#34;</span>:<span style=color:#66d9ef>false</span>,<span style=color:#f92672>&#34;addon&#34;</span>:<span style=color:#66d9ef>true</span>,<span style=color:#f92672>&#34;rejectUnauthorizedCerts&#34;</span>:<span style=color:#66d9ef>true</span>,<span style=color:#f92672>&#34;ha_boolean&#34;</span>:<span style=color:#e6db74>&#34;y|yes|true|on|home|open&#34;</span>,<span style=color:#f92672>&#34;connectionDelay&#34;</span>:<span style=color:#66d9ef>true</span>,<span style=color:#f92672>&#34;cacheJson&#34;</span>:<span style=color:#66d9ef>true</span>}]
</span></span></code></pre></div><p>Did you find this how-to useful and/or did you make a crazy automation based on this tutorial?
Hit me up on <a href=https://twitter.com/DezeStijn title="DezeStijn @ Twitter" rel=external target=_blank>Twitter</a> and let me know!</p></main><hr><footer><div class=footer><p><div class=previous-post><a href="https://sequr.be/blog/2020/10/mqtt-templates-for-shelly-devices/?ref=footer"><span style=font-weight:700>« Previous</span><br>MQTT templates for Shelly devices</a><div class=next-post><a href="https://sequr.be/blog/2020/11/force-update/downgrade-shelly-firmware/?ref=footer"><span style=font-weight:700>Next »</span><br>Force update/downgrade Shelly firmware</a></div></p></div><a class=u-bridgy-fed href=https://fed.brid.gy/ hidden=from-humans></a></footer></article></section><aside class=article-toc><div class=toc-wrapper><h4 id=contents></h4><nav id=TableOfContents><ul><li><a href=#installing-the-conbee-ii-gateway>Installing the ConBee II gateway</a><ul><li><a href=#get-a-dresden-elektronik-conbee-ii-usb-gateway>Get a Dresden Elektronik ConBee II USB gateway</a></li><li><a href=#add-conbee-ii-to-your-system>Add ConBee II to your system</a></li><li><a href=#install-deconz-add-on>Install deCONZ add-on</a></li></ul></li><li><a href=#adding-the-aqara-door-and-window-sensor>Adding the Aqara Door and Window Sensor</a><ul><li><a href=#launch-deconz--phoscon>Launch deCONZ / Phoscon</a></li><li><a href=#add-the-sensor>Add the sensor</a></li><li><a href=#rename-in-home-assistant>Rename in Home Assistant</a></li></ul></li><li><a href=#create-automations>Create automations</a></li></ul></nav></div></aside></div></body></html>